var e,t,n,r,i,o,s=globalThis,a={},u={},l=s.parcelRequire048a;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in u){var t=u[e];delete u[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){u[e]=t},s.parcelRequire048a=l),(0,l.register)("fcGo5",(function(e,t){e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}}));var c={};Object.defineProperty(c,"__esModule",{value:!0});var h={};Object.defineProperty(h,"__esModule",{value:!0});var f={};async function p(e){return new Promise(((t,n)=>{let{log:r,warn:i,error:o}=console;f({instantiateWasm:(t,n)=>(WebAssembly.instantiate(e,t).then((e=>{n(e.instance)})).catch((e=>{throw e})),{})}).then((e=>{h.onigasmH=e,t()})),"undefined"!=typeof print&&(console.log=r,console.error=o,console.warn=i)}))}"undefined"!=typeof document&&document.currentScript&&document.currentScript.src,f=function(e){var t,n,r,i,o,s,a,u,l,c,h=void 0!==(e=e||{})?e:{},f={};for(n in h)h.hasOwnProperty(n)&&(f[n]=h[n]);var p=[];r=function(e){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(v("object"==typeof(t=read(e,"binary"))),t)},"undefined"!=typeof scriptArgs?p=scriptArgs:void 0!==arguments&&(p=arguments),"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print);var d=h.print||console.log.bind(console),g=h.printErr||console.warn.bind(console);for(n in f)f.hasOwnProperty(n)&&(h[n]=f[n]);f=null,h.arguments&&(p=h.arguments),h.thisProgram&&h.thisProgram,h.quit&&h.quit;h.wasmBinary&&(i=h.wasmBinary),h.noExitRuntime&&h.noExitRuntime,"object"!=typeof WebAssembly&&g("no native wasm support detected");var m=new WebAssembly.Table({initial:244,maximum:244,element:"anyfunc"}),y=!1;function v(e,t){e||M("Assertion failed: "+t)}var _="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t,n){for(var r=t+n,i=t;e[i]&&!(i>=r);)++i;if(i-t>16&&e.subarray&&_)return _.decode(e.subarray(t,i));for(var o="";t<i;){var s=e[t++];if(128&s){var a=63&e[t++];if(192!=(224&s)){var u=63&e[t++];if((s=224==(240&s)?(15&s)<<12|a<<6|u:(7&s)<<18|a<<12|u<<6|63&e[t++])<65536)o+=String.fromCharCode(s);else{var l=s-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&s)<<6|a)}else o+=String.fromCharCode(s)}return o}function w(e,t){return e%t>0&&(e+=t-e%t),e}function A(e){s=e,h.HEAP8=a=new Int8Array(e),h.HEAP16=new Int16Array(e),h.HEAP32=l=new Int32Array(e),h.HEAPU8=u=new Uint8Array(e),h.HEAPU16=new Uint16Array(e),h.HEAPU32=new Uint32Array(e),h.HEAPF32=new Float32Array(e),h.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var S=h.TOTAL_MEMORY||157286400;function C(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?void 0===t.arg?h.dynCall_v(n):h.dynCall_vi(n,t.arg):n(void 0===t.arg?null:t.arg)}else t()}}(o=h.wasmMemory?h.wasmMemory:new WebAssembly.Memory({initial:S/65536}))&&(s=o.buffer),S=s.byteLength,A(s),l[66156]=5507664;var k=[],x=[],R=[],T=[],P=0,E=null,I=null;function M(e){throw h.onAbort&&h.onAbort(e),d(e+=""),g(e),y=!0,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(e)}h.preloadedImages={},h.preloadedAudios={};var O="data:application/octet-stream;base64,";function N(e){return String.prototype.startsWith?e.startsWith(O):0===e.indexOf(O)}var L="onigasm.wasm";N(L)||(t=L,L=h.locateFile?h.locateFile(t,""):""+t),x.push({func:function(){D()}});var G={buffers:[null,[],[]],printChar:function(e,t){var n=G.buffers[e];0===t||10===t?((1===e?d:g)(b(n,0)),n.length=0):n.push(t)},varargs:0,get:function(e){return G.varargs+=4,l[G.varargs-4>>2]},getStr:function(){var e;return(e=G.get())?b(u,e,void 0):""},get64:function(){var e=G.get();return G.get(),e},getZero:function(){G.get()}},j={abort:function(){M()},emscripten_get_sbrk_ptr:function(){return 264624},emscripten_memcpy_big:function(e,t,n){u.set(u.subarray(t,t+n),e)},emscripten_resize_heap:function(e){var t=a.length;if(e>2147418112)return!1;for(var n=Math.max(t,16777216);n<e;)n=n<=536870912?w(2*n,65536):Math.min(w((3*n+2147483648)/4,65536),2147418112);return!!function(e){try{return o.grow(e-s.byteLength+65535>>16),A(o.buffer),1}catch(e){}}(n)},fd_close:function(e){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||M(e),e.errno}},fd_seek:function(e,t,n,r,i){try{return 0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||M(e),e.errno}},fd_write:function(e,t,n,r){try{for(var i=0,o=0;o<n;o++){for(var s=l[t+8*o>>2],a=l[t+(8*o+4)>>2],c=0;c<a;c++)G.printChar(e,u[s+c]);i+=a}return l[r>>2]=i,0}catch(e){return"undefined"!=typeof FS&&e instanceof FS.ErrnoError||M(e),e.errno}},memory:o,setTempRet0:function(e){},table:m},B=function(){var e={env:j,wasi_unstable:j};function t(e,t){var n=e.exports;h.asm=n,function(e){if(P--,h.monitorRunDependencies&&h.monitorRunDependencies(P),0==P&&(null!==E&&(clearInterval(E),E=null),I)){var t=I;I=null,t()}}()}function n(e){t(e.instance)}function o(t){return new Promise((function(e,t){e(function(){try{if(i)return new Uint8Array(i);if(r)return r(L);throw"both async and sync fetching of the wasm failed"}catch(e){M(e)}}())})).then((function(t){return WebAssembly.instantiate(t,e)})).then(t,(function(e){g("failed to asynchronously prepare wasm: "+e),M(e)}))}if(P++,h.monitorRunDependencies&&h.monitorRunDependencies(P),h.instantiateWasm)try{return h.instantiateWasm(e,t)}catch(e){return g("Module.instantiateWasm callback failed with error: "+e),!1}return function(){if(i||"function"!=typeof WebAssembly.instantiateStreaming||N(L)||"function"!=typeof fetch)return o(n);fetch(L,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(n,(function(e){g("wasm streaming compile failed: "+e),g("falling back to ArrayBuffer instantiation"),o(n)}))}))}(),{}}();h.asm=B;var D=h.___wasm_call_ctors=function(){return h.asm.__wasm_call_ctors.apply(null,arguments)};h._malloc=function(){return h.asm.malloc.apply(null,arguments)},h._free=function(){return h.asm.free.apply(null,arguments)},h._getLastError=function(){return h.asm.getLastError.apply(null,arguments)},h._compilePattern=function(){return h.asm.compilePattern.apply(null,arguments)},h._disposeCompiledPatterns=function(){return h.asm.disposeCompiledPatterns.apply(null,arguments)},h._findBestMatch=function(){return h.asm.findBestMatch.apply(null,arguments)},h.___cxa_demangle=function(){return h.asm.__cxa_demangle.apply(null,arguments)},h._setThrew=function(){return h.asm.setThrew.apply(null,arguments)};var U=h.stackSave=function(){return h.asm.stackSave.apply(null,arguments)},F=h.stackAlloc=function(){return h.asm.stackAlloc.apply(null,arguments)},W=h.stackRestore=function(){return h.asm.stackRestore.apply(null,arguments)};function H(e){function t(){!c&&(c=!0,y||(C(x),C(R),h.onRuntimeInitialized&&h.onRuntimeInitialized(),function(){if(h.postRun)for("function"==typeof h.postRun&&(h.postRun=[h.postRun]);h.postRun.length;){var e;e=h.postRun.shift(),T.unshift(e)}C(T)}()))}e=e||p,!(P>0)&&(function(){if(h.preRun)for("function"==typeof h.preRun&&(h.preRun=[h.preRun]);h.preRun.length;){var e;e=h.preRun.shift(),k.unshift(e)}C(k)}(),P>0||(h.setStatus?(h.setStatus("Running..."),setTimeout((function(){setTimeout((function(){h.setStatus("")}),1),t()}),1)):t()))}if(h.__growWasmMemory=function(){return h.asm.__growWasmMemory.apply(null,arguments)},h.dynCall_vi=function(){return h.asm.dynCall_vi.apply(null,arguments)},h.dynCall_iiii=function(){return h.asm.dynCall_iiii.apply(null,arguments)},h.dynCall_iiiii=function(){return h.asm.dynCall_iiiii.apply(null,arguments)},h.dynCall_iii=function(){return h.asm.dynCall_iii.apply(null,arguments)},h.dynCall_iidiiii=function(){return h.asm.dynCall_iidiiii.apply(null,arguments)},h.dynCall_vii=function(){return h.asm.dynCall_vii.apply(null,arguments)},h.dynCall_ii=function(){return h.asm.dynCall_ii.apply(null,arguments)},h.dynCall_i=function(){return h.asm.dynCall_i.apply(null,arguments)},h.dynCall_v=function(){return h.asm.dynCall_v.apply(null,arguments)},h.dynCall_viiiiii=function(){return h.asm.dynCall_viiiiii.apply(null,arguments)},h.dynCall_viiiii=function(){return h.asm.dynCall_viiiii.apply(null,arguments)},h.dynCall_viiii=function(){return h.asm.dynCall_viiii.apply(null,arguments)},h.dynCall_jiji=function(){return h.asm.dynCall_jiji.apply(null,arguments)},h.asm=B,h.ccall=function(e,t,n,r,i){var o,s,l={string:function(e){var t=0;if(null!=e&&0!==e){var n,r=1+(e.length<<2);n=t=F(r),function(e,t,n,r){if(r>0){for(var i=n+r-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}t[n]=0}}(e,u,n,r)}return t},array:function(e){var t=F(e.length);return a.set(e,t),t}},c=(v(o=h["_"+e],"Cannot call unknown function "+e+", make sure it is exported"),o),f=[],p=0;if(r)for(var d=0;d<r.length;d++){var g=l[n[d]];g?(0===p&&(p=U()),f[d]=g(r[d])):f[d]=r[d]}var m=c.apply(null,f);return s=m,m="string"===t?s?b(u,s,undefined):"":"boolean"===t?!!s:s,0!==p&&W(p),m},h.then=function(e){if(c)e(h);else{var t=h.onRuntimeInitialized;h.onRuntimeInitialized=function(){t&&t(),e(h)}}return h},I=function e(){c||H(),c||(I=e)},h.run=H,h.preInit)for("function"==typeof h.preInit&&(h.preInit=[h.preInit]);h.preInit.length>0;)h.preInit.pop()();return H(),e};let d=!1;async function g(e){if(d)throw Error("Onigasm#init has been called and was succesful, subsequent calls are not allowed once initialized");if("string"==typeof e){let t=await(await fetch(e)).arrayBuffer();await p(t)}else{if(!(e instanceof ArrayBuffer))throw TypeError("Expected a string (URL of .wasm file) or ArrayBuffer (.wasm file itself) as first parameter");await p(e)}d=!0}h.loadWASM=g,c.loadWASM=h.loadWASM;var m={};Object.defineProperty(m,"__esModule",{value:!0});var y={};Object.defineProperty(y,"__esModule",{value:!0});var v={},_={};function b(e){var t=this;if(t instanceof b||(t=new b),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function w(e,t,n,r){if(!(this instanceof w))return new w(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}_=b,b.Node=w,b.create=b,b.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},b.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},b.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},b.prototype.push=function(){for(var e,t=0,n=arguments.length;t<n;t++)e=arguments[t],this.tail=new w(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},b.prototype.unshift=function(){for(var e,t=0,n=arguments.length;t<n;t++)e=arguments[t],this.head=new w(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},b.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},b.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},b.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},b.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},b.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},b.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},b.prototype.map=function(e,t){t=t||this;for(var n=new b,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},b.prototype.mapReverse=function(e,t){t=t||this;for(var n=new b,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},b.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},b.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},b.prototype.toArray=function(){for(var e=Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},b.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},b.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new b;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},b.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new b;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},b.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,r=this.head;null!==r&&n<e;n++)r=r.next;var i=[];for(n=0;r&&n<t;n++)i.push(r.value),r=this.removeNode(r);null===r&&(r=this.tail),r!==this.head&&r!==this.tail&&(r=r.prev);for(n=2;n<arguments.length;n++)r=function(e,t,n){var r=t===e.head?new w(n,null,t,e):new w(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}(this,r,arguments[n]);return i},b.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{l("fcGo5")(b)}catch(e){}const A=Symbol("max"),S=Symbol("length"),C=Symbol("lengthCalculator"),k=Symbol("allowStale"),x=Symbol("maxAge"),R=Symbol("dispose"),T=Symbol("noDisposeOnSet"),E=Symbol("lruList"),P=Symbol("cache"),I=Symbol("updateAgeOnGet"),M=()=>1,O=(e,t,n)=>{let r=e[P].get(t);if(r){let t=r.value;if(N(e,t)){if(G(e,r),!e[k])return}else n&&(e[I]&&(r.value.now=Date.now()),e[E].unshiftNode(r));return t.value}},N=(e,t)=>{if(!t||!t.maxAge&&!e[x])return!1;let n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[x]&&n>e[x]},L=e=>{if(e[S]>e[A])for(let t=e[E].tail;e[S]>e[A]&&null!==t;){let n=t.prev;G(e,t),t=n}},G=(e,t)=>{if(t){let n=t.value;e[R]&&e[R](n.key,n.value),e[S]-=n.length,e[P].delete(n.key),e[E].removeNode(t)}};class D{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const j=(e,t,n,r)=>{let i=n.value;N(e,i)&&(G(e,n),e[k]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};v=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[A]=e.max||1/0;let t=e.length||M;if(this[C]="function"!=typeof t?M:t,this[k]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[x]=e.maxAge||0,this[R]=e.dispose,this[T]=e.noDisposeOnSet||!1,this[I]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[A]=e||1/0,L(this)}get max(){return this[A]}set allowStale(e){this[k]=!!e}get allowStale(){return this[k]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[x]=e,L(this)}get maxAge(){return this[x]}set lengthCalculator(e){"function"!=typeof e&&(e=M),e!==this[C]&&(this[C]=e,this[S]=0,this[E].forEach((e=>{e.length=this[C](e.value,e.key),this[S]+=e.length}))),L(this)}get lengthCalculator(){return this[C]}get length(){return this[S]}get itemCount(){return this[E].length}rforEach(e,t){t=t||this;for(let n=this[E].tail;null!==n;){let r=n.prev;j(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[E].head;null!==n;){let r=n.next;j(this,e,n,t),n=r}}keys(){return this[E].toArray().map((e=>e.key))}values(){return this[E].toArray().map((e=>e.value))}reset(){this[R]&&this[E]&&this[E].length&&this[E].forEach((e=>this[R](e.key,e.value))),this[P]=new Map,this[E]=new _,this[S]=0}dump(){return this[E].map((e=>!N(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[E]}set(e,t,n){if((n=n||this[x])&&"number"!=typeof n)throw TypeError("maxAge must be a number");let r=n?Date.now():0,i=this[C](t,e);if(this[P].has(e)){if(i>this[A])return G(this,this[P].get(e)),!1;let o=this[P].get(e).value;return this[R]&&!this[T]&&this[R](e,o.value),o.now=r,o.maxAge=n,o.value=t,this[S]+=i-o.length,o.length=i,this.get(e),L(this),!0}let o=new D(e,t,i,r,n);return o.length>this[A]?(this[R]&&this[R](e,t),!1):(this[S]+=o.length,this[E].unshift(o),this[P].set(e,this[E].head),L(this),!0)}has(e){if(!this[P].has(e))return!1;let t=this[P].get(e).value;return!N(this,t)}get(e){return O(this,e,!0)}peek(e){return O(this,e,!1)}pop(){let e=this[E].tail;return e?(G(this,e),e.value):null}del(e){G(this,this[P].get(e))}load(e){this.reset();let t=Date.now();for(let n=e.length-1;n>=0;n--){let r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{let e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[P].forEach(((e,t)=>O(this,t,!1)))}};var B={};function U(e){let t=h.onigasmH._malloc(e.utf8Bytes.length);return h.onigasmH.HEAPU8.set(e.utf8Bytes,t),t}function F(e){let t=[],n=0;for(;0!==h.onigasmH.HEAPU8[e];)t[n++]=h.onigasmH.HEAPU8[e++];return t.join()}Object.defineProperty(B,"__esModule",{value:!0}),B.default=class{constructor(e){if(this.substring=(e,t)=>this.source.substring(e,t),this.toString=(e,t)=>this.source,"string"!=typeof e)throw TypeError("Argument must be a string");this.source=e,this._utf8Bytes=null,this._utf8Indexes=null}get utf8Bytes(){return this._utf8Bytes||this.encode(),this._utf8Bytes}get utf8Indexes(){return this._utf8Bytes||this.encode(),this._utf8Indexes}get content(){return this.source}get length(){return this.source.length}get hasMultiByteCharacters(){return null!==this.utf8Indexes}convertUtf8OffsetToUtf16(e){if(e<0)return 0;if(e>=this._utf8Bytes.length-1)return this.source.length;let t=this.utf8Indexes;return t&&e>=this._mappingTableStartOffset?function(e,t){let n=0,r=e.length;if(0===r)return 0;for(;n<r;){let i=Math.floor((n+r)/2);e[i]>=t?r=i:n=i+1}for(;n>0&&(n>=e.length||e[n]>t);)n--;return n>0&&e[n]===e[n-1]&&n--,n}(t,e-this._mappingTableStartOffset)+this._mappingTableStartOffset:e}convertUtf16OffsetToUtf8(e){if(e<0)return 0;let t=this._utf8Bytes;if(e>=this.source.length)return t.length-1;let n=this.utf8Indexes;return n&&e>=this._mappingTableStartOffset?n[e-this._mappingTableStartOffset]+this._mappingTableStartOffset:e}encode(){let e,t=this.source,n=t.length,r=0,i=0;function o(t){let o=3*(n-t);e=o<=255?new Uint8Array(n-t):o<=65535?new Uint16Array(n-t):new Uint32Array(n-t),i=t,e[r++]=0}let s=new Uint8Array(3*n+1),a=0,u=0;for(;u<t.length;){let l,c,h,f=t.charCodeAt(u);if(e&&(e[r++]=a-i),f<55296||f>57343)l=f;else if(f>=56320)l=65533;else if(u===n-1)l=65533;else{let n=t.charCodeAt(u+1);if(56320<=n&&n<=57343){e||o(u),l=65536+((1023&f)<<10)+(1023&n),u+=1,e[r++]=a-i}else l=65533}if(l<=127?(c=1,h=0):l<=2047?(c=2,h=192):l<=65535?(c=3,h=224):(c=4,h=240),1===c)s[a++]=l;else for(e||o(a),s[a++]=(l>>6*--c)+h;c>0;){let e=l>>6*(c-1);s[a++]=128|63&e,c-=1}u+=1}let l=s.slice(0,a+1);l[a]=0,this._utf8Bytes=l,e&&(this._utf8Indexes=e,this._mappingTableStartOffset=i)}};const W=new v({dispose:(e,t)=>{let n=h.onigasmH._malloc(t.regexTPtrs.length);if(h.onigasmH.HEAPU8.set(t.regexTPtrs,n),0!==h.onigasmH._disposeCompiledPatterns(n,e.patterns.length)){let e=F(h.onigasmH._getLastError());throw Error(e)}h.onigasmH._free(n)},max:1e3});class H{constructor(e){if(null===h.onigasmH)throw Error("Onigasm has not been initialized, call loadWASM from 'onigasm' exports before using any other API");for(let t=0;t<e.length;t++){if("string"!=typeof e[t])throw TypeError("First parameter to OnigScanner constructor must be array of (pattern) strings")}this.sources=e.slice()}get patterns(){return this.sources.slice()}findNextMatch(e,t,n){null==t&&(t=0),"function"==typeof t&&(n=t,t=0);try{n(null,this.findNextMatchSync(e,t))}catch(e){n(e)}}findNextMatchSync(e,t){null==t&&(t=0),t=this.convertToNumber(t);let n=W.get(this);if(!n){let e=h.onigasmH._malloc(4),t=[];for(let n=0;n<this.sources.length;n++){let r=this.sources[n],i=U(new B.default(r));if(0!==h.onigasmH._compilePattern(i,e)){let e=F(h.onigasmH._getLastError());throw Error(e)}let o=h.onigasmH.HEAP32[e/4];t.push(o),h.onigasmH._free(i)}n={regexTPtrs:new Uint8Array(Uint32Array.from(t).buffer)},h.onigasmH._free(e),W.set(this,n)}let r=e instanceof B.default?e:new B.default(this.convertToString(e)),i=U(r),o=h.onigasmH._malloc(8),s=h.onigasmH._malloc(n.regexTPtrs.length);if(h.onigasmH.HEAPU8.set(n.regexTPtrs,s),0!==h.onigasmH._findBestMatch(s,this.sources.length,i,r.utf8Bytes.length-1,r.convertUtf16OffsetToUtf8(t),o)){let e=F(h.onigasmH._getLastError());throw Error(e)}let[a,u,l]=new Uint32Array(h.onigasmH.HEAPU32.buffer,o,3);if(h.onigasmH._free(i),h.onigasmH._free(o),h.onigasmH._free(s),l>0){let e=new Uint32Array(h.onigasmH.HEAPU32.buffer,u,l),t=[],n=0,i=0;for(;n<l;){let o=i++,s=e[n++],a=e[n++];r.hasMultiByteCharacters&&(s=r.convertUtf8OffsetToUtf16(s),a=r.convertUtf8OffsetToUtf16(a)),t.push({end:a,index:o,length:a-s,start:s})}return h.onigasmH._free(u),{captureIndices:t,index:a,scanner:this}}return null}convertToString(e){return void 0===e?"undefined":null===e?"null":e instanceof B.default?e.content:e.toString()}convertToNumber(e){return isFinite(e=parseInt(e,10))||(e=0),Math.max(e,0)}}y.OnigScanner=H,y.default=H,m.default=class{constructor(e){this.source=e;try{this.scanner=new y.default([this.source])}catch(e){}}searchSync(e,t){let n;return null==t&&(t=0),n=this.scanner.findNextMatchSync(e,t),this.captureIndicesForMatch(e,n)}search(e,t,n){null==t&&(t=0),"function"==typeof t&&(n=t,t=0);try{n(null,this.searchSync(e,t))}catch(e){n(e)}}testSync(e){return"boolean"==typeof this.source||"boolean"==typeof e?this.source===e:null!=this.searchSync(e)}test(e,t){"function"!=typeof t&&(t=()=>{});try{t(null,this.testSync(e))}catch(e){t(e)}}captureIndicesForMatch(e,t){if(null==t)return null;{let n,{captureIndices:r}=t;e=this.scanner.convertToString(e);for(let t=0;t<r.length;t++)(n=r[t]).match=e.slice(n.start,n.end);return r}}},c.OnigRegExp=m.default,c.OnigScanner=y.default,c.OnigString=B.default;var $={},z=$&&$.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(e){o(e)}}function a(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(s,a)}u((r=r.apply(e,t||[])).next())}))},q=$&&$.__generator||function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty($,"__esModule",{value:!0});var Q={};Object.defineProperty(Q,"__esModule",{value:!0});var J={};Object.defineProperty(J,"__esModule",{value:!0});var X={};Object.defineProperty(X,"__esModule",{value:!0}),X.clone=function(e){return function e(t){return Array.isArray(t)?function(t){for(var n=[],r=0,i=t.length;r<i;r++)n[r]=e(t[r]);return n}(t):"object"==typeof t?function(t){var n={};for(var r in t)n[r]=e(t[r]);return n}(t):t}(e)},X.mergeObjects=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach((function(t){for(var n in t)e[n]=t[n]})),e};var Y=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/,K=function(){function e(){}return e.hasCaptures=function(e){return Y.test(e)},e.replaceCaptures=function(e,t,n){return e.replace(Y,(function(e,r,i,o){var s=n[parseInt(r||i,10)];if(!s)return e;for(var a=t.substring(s.start,s.end);"."===a[0];)a=a.substring(1);switch(o){case"downcase":return a.toLowerCase();case"upcase":return a.toUpperCase();default:return a}}))},e}();X.RegexSource=K;var V={},Z=V&&V.__extends||(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)});Object.defineProperty(V,"__esModule",{value:!0});var ee={},et={},en=et={};function er(){throw Error("setTimeout has not been defined")}function ei(){throw Error("clearTimeout has not been defined")}function eo(e){if(t===setTimeout)return setTimeout(e,0);if((t===er||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:er}catch(e){t=er}try{n="function"==typeof clearTimeout?clearTimeout:ei}catch(e){n=ei}}();var es=[],ea=!1,eu=-1;function el(){ea&&r&&(ea=!1,r.length?es=r.concat(es):eu=-1,es.length&&ec())}function ec(){if(!ea){var e=eo(el);ea=!0;for(var t=es.length;t;){for(r=es,es=[];++eu<t;)r&&r[eu].run();eu=-1,t=es.length}r=null,ea=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===ei||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function eh(e,t){this.fun=e,this.array=t}function ef(){}function ep(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function ed(e,t){for(var n,r="",i=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)n=e.charCodeAt(a);else{if(47===n)break;n=47}if(47===n){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var u=r.lastIndexOf("/");if(u!==r.length-1){-1===u?(r="",i=0):i=(r=r.slice(0,u)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),i=a-o-1;o=a,s=0}else 46===n&&-1!==s?++s:s=-1}return r}en.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];es.push(new eh(e,t)),1!==es.length||ea||eo(ec)},eh.prototype.run=function(){this.fun.apply(null,this.array)},en.title="browser",en.browser=!0,en.env={},en.argv=[],en.version="",en.versions={},en.on=ef,en.addListener=ef,en.once=ef,en.off=ef,en.removeListener=ef,en.removeAllListeners=ef,en.emit=ef,en.prependListener=ef,en.prependOnceListener=ef,en.listeners=function(e){return[]},en.binding=function(e){throw Error("process.binding is not supported")},en.cwd=function(){return"/"},en.chdir=function(e){throw Error("process.chdir is not supported")},en.umask=function(){return 0};var eg={resolve:function(){for(var e,t,n="",r=!1,i=arguments.length-1;i>=-1&&!r;i--)i>=0?t=arguments[i]:(void 0===e&&(e=et.cwd()),t=e),ep(t),0!==t.length&&(n=t+"/"+n,r=47===t.charCodeAt(0));return n=ed(n,!r),r?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(ep(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=ed(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return ep(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];ep(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":eg.normalize(e)},relative:function(e,t){if(ep(e),ep(t),e===t||(e=eg.resolve(e))===(t=eg.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,i=r-n,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var s=t.length-o,a=i<s?i:s,u=-1,l=0;l<=a;++l){if(l===a){if(s>a){if(47===t.charCodeAt(o+l))return t.slice(o+l+1);if(0===l)return t.slice(o+l)}else i>a&&(47===e.charCodeAt(n+l)?u=l:0===l&&(u=0));break}var c=e.charCodeAt(n+l);if(c!==t.charCodeAt(o+l))break;47===c&&(u=l)}var h="";for(l=n+u+1;l<=r;++l)(l===r||47===e.charCodeAt(l))&&(0===h.length?h+="..":h+="/..");return h.length>0?h+t.slice(o+u):(o+=u,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(ep(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw TypeError('"ext" argument must be a string');ep(e);var n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){var u=e.charCodeAt(n);if(47===u){if(!o){r=n+1;break}}else-1===a&&(o=!1,a=n+1),s>=0&&(u===t.charCodeAt(s)?-1==--s&&(i=n):(s=-1,i=a))}return r===i?i=a:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname:function(e){ep(e);for(var t=-1,n=0,r=-1,i=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(i=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){var t,n;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+n:t+"/"+n:n},parse:function(e){ep(e);var t,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var r=e.charCodeAt(0),i=47===r;i?(n.root="/",t=1):t=0;for(var o=-1,s=0,a=-1,u=!0,l=e.length-1,c=0;l>=t;--l)if(47!==(r=e.charCodeAt(l)))-1===a&&(u=!1,a=l+1),46===r?-1===o?o=l:1!==c&&(c=1):-1!==o&&(c=-1);else if(!u){s=l+1;break}return-1===o||-1===a||0===c||1===c&&o===a-1&&o===s+1?-1!==a&&(n.base=n.name=0===s&&i?e.slice(1,a):e.slice(s,a)):(0===s&&i?(n.name=e.slice(1,o),n.base=e.slice(1,a)):(n.name=e.slice(s,o),n.base=e.slice(s,a)),n.ext=e.slice(o,a)),s>0?n.dir=e.slice(0,s-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};eg.posix=eg,ee=eg;var em=/\\(\d+)/,ey=/\\(\d+)/g,ev=function(){function e(e,t,n,r){this.$location=e,this.id=t,this._name=n||null,this._nameIsCapturing=X.RegexSource.hasCaptures(this._name),this._contentName=r||null,this._contentNameIsCapturing=X.RegexSource.hasCaptures(this._contentName)}return Object.defineProperty(e.prototype,"debugName",{get:function(){return this.constructor.name+"#"+this.id+" @ "+ee.basename(this.$location.filename)+":"+this.$location.line},enumerable:!0,configurable:!0}),e.prototype.getName=function(e,t){return this._nameIsCapturing?X.RegexSource.replaceCaptures(this._name,e,t):this._name},e.prototype.getContentName=function(e,t){return this._contentNameIsCapturing?X.RegexSource.replaceCaptures(this._contentName,e,t):this._contentName},e.prototype.collectPatternsRecursive=function(e,t,n){throw Error("Implement me!")},e.prototype.compile=function(e,t,n,r){throw Error("Implement me!")},e}();V.Rule=ev;var e_=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.retokenizeCapturedWithRuleId=o,s}return Z(t,e),t}(ev);V.CaptureRule=e_;var eb=function(){function e(e,t,n){void 0===n&&(n=!0),n?this._handleAnchors(e):(this.source=e,this.hasAnchor=!1),this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()),this.ruleId=t,this.hasBackReferences=em.test(this.source)}return e.prototype.clone=function(){return new e(this.source,this.ruleId,!0)},e.prototype.setSource=function(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))},e.prototype._handleAnchors=function(e){if(e){var t,n=void 0,r=void 0,i=0,o=[],s=!1;for(n=0,t=e.length;n<t;n++)"\\"===e.charAt(n)&&n+1<t&&("z"===(r=e.charAt(n+1))?(o.push(e.substring(i,n)),o.push("$(?!\\n)(?<!\\n)"),i=n+2):("A"===r||"G"===r)&&(s=!0),n++);this.hasAnchor=s,0===i?this.source=e:(o.push(e.substring(i,t)),this.source=o.join(""))}else this.hasAnchor=!1,this.source=e},e.prototype.resolveBackReferences=function(e,t){var n=t.map((function(t){return e.substring(t.start,t.end)}));return ey.lastIndex=0,this.source.replace(ey,(function(e,t){return(n[parseInt(t,10)]||"").replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}))},e.prototype._buildAnchorCache=function(){var e,t,n,r,i=[],o=[],s=[],a=[];for(e=0,t=this.source.length;e<t;e++)n=this.source.charAt(e),i[e]=n,o[e]=n,s[e]=n,a[e]=n,"\\"===n&&e+1<t&&("A"===(r=this.source.charAt(e+1))?(i[e+1]="￿",o[e+1]="￿",s[e+1]="A",a[e+1]="A"):"G"===r?(i[e+1]="￿",o[e+1]="G",s[e+1]="￿",a[e+1]="G"):(i[e+1]=r,o[e+1]=r,s[e+1]=r,a[e+1]=r),e++);return{A0_G0:i.join(""),A0_G1:o.join(""),A1_G0:s.join(""),A1_G1:a.join("")}},e.prototype.resolveAnchors=function(e,t){return this.hasAnchor?e?t?this._anchorCache.A1_G1:this._anchorCache.A1_G0:t?this._anchorCache.A0_G1:this._anchorCache.A0_G0:this.source},e}();function ew(e){return new c.OnigScanner(e)}V.RegExpSource=eb,V.createOnigString=function(e){var t=new c.OnigString(e);return t.$str=e,t},V.getString=function(e){return e.$str};var eA=function(){function e(){this._items=[],this._hasAnchors=!1,this._cached=null,this._cachedSources=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}return e.prototype.push=function(e){this._items.push(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},e.prototype.unshift=function(e){this._items.unshift(e),this._hasAnchors=this._hasAnchors||e.hasAnchor},e.prototype.length=function(){return this._items.length},e.prototype.setSource=function(e,t){this._items[e].source!==t&&(this._cached=null,this._anchorCache.A0_G0=null,this._anchorCache.A0_G1=null,this._anchorCache.A1_G0=null,this._anchorCache.A1_G1=null,this._items[e].setSource(t))},e.prototype.compile=function(e,t,n){if(this._hasAnchors)return this._anchorCache={A0_G0:this._anchorCache.A0_G0||(!1===t&&!1===n?this._resolveAnchors(t,n):null),A0_G1:this._anchorCache.A0_G1||(!1===t&&!0===n?this._resolveAnchors(t,n):null),A1_G0:this._anchorCache.A1_G0||(!0===t&&!1===n?this._resolveAnchors(t,n):null),A1_G1:this._anchorCache.A1_G1||(!0===t&&!0===n?this._resolveAnchors(t,n):null)},t?n?this._anchorCache.A1_G1:this._anchorCache.A1_G0:n?this._anchorCache.A0_G1:this._anchorCache.A0_G0;if(!this._cached){var r=this._items.map((function(e){return e.source}));this._cached={scanner:ew(r),rules:this._items.map((function(e){return e.ruleId})),debugRegExps:r}}return this._cached},e.prototype._resolveAnchors=function(e,t){var n=this._items.map((function(n){return n.resolveAnchors(e,t)}));return{scanner:ew(n),rules:this._items.map((function(e){return e.ruleId})),debugRegExps:n}},e}();V.RegExpSourceList=eA;var eS=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,null)||this;return s._match=new eb(i,s.id),s.captures=o,s._cachedCompiledPatterns=null,s}return Z(t,e),Object.defineProperty(t.prototype,"debugMatchRegExp",{get:function(){return""+this._match.source},enumerable:!0,configurable:!0}),t.prototype.collectPatternsRecursive=function(e,t,n){t.push(this._match)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new eA,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(e,n,r)},t}(ev);V.MatchRule=eS;var eC=function(e){function t(t,n,r,i,o){var s=e.call(this,t,n,r,i)||this;return s.patterns=o.patterns,s.hasMissingPatterns=o.hasMissingPatterns,s._cachedCompiledPatterns=null,s}return Z(t,e),t.prototype.collectPatternsRecursive=function(e,t,n){var r,i;for(r=0,i=this.patterns.length;r<i;r++)e.getRule(this.patterns[r]).collectPatternsRecursive(e,t,!1)},t.prototype.compile=function(e,t,n,r){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new eA,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0)),this._cachedCompiledPatterns.compile(e,n,r)},t}(ev);V.IncludeOnlyRule=eC;var ek=function(e){function t(t,n,r,i,o,s,a,u,l,c){var h=e.call(this,t,n,r,i)||this;return h._begin=new eb(o,h.id),h.beginCaptures=s,h._end=new eb(a,-1),h.endHasBackReferences=h._end.hasBackReferences,h.endCaptures=u,h.applyEndPatternLast=l||!1,h.patterns=c.patterns,h.hasMissingPatterns=c.hasMissingPatterns,h._cachedCompiledPatterns=null,h}return Z(t,e),Object.defineProperty(t.prototype,"debugBeginRegExp",{get:function(){return""+this._begin.source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"debugEndRegExp",{get:function(){return""+this._end.source},enumerable:!0,configurable:!0}),t.prototype.getEndWithResolvedBackReferences=function(e,t){return this._end.resolveBackReferences(e,t)},t.prototype.collectPatternsRecursive=function(e,t,n){if(n){var r,i=void 0;for(i=0,r=this.patterns.length;i<r;i++)e.getRule(this.patterns[i]).collectPatternsRecursive(e,t,!1)}else t.push(this._begin)},t.prototype.compile=function(e,t,n,r){var i=this._precompile(e);return this._end.hasBackReferences&&(this.applyEndPatternLast?i.setSource(i.length()-1,t):i.setSource(0,t)),this._cachedCompiledPatterns.compile(e,n,r)},t.prototype._precompile=function(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new eA,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0),this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)),this._cachedCompiledPatterns},t}(ev);V.BeginEndRule=ek;var ex=function(e){function t(t,n,r,i,o,s,a,u,l){var c=e.call(this,t,n,r,i)||this;return c._begin=new eb(o,c.id),c.beginCaptures=s,c.whileCaptures=u,c._while=new eb(a,-2),c.whileHasBackReferences=c._while.hasBackReferences,c.patterns=l.patterns,c.hasMissingPatterns=l.hasMissingPatterns,c._cachedCompiledPatterns=null,c._cachedCompiledWhilePatterns=null,c}return Z(t,e),t.prototype.getWhileWithResolvedBackReferences=function(e,t){return this._while.resolveBackReferences(e,t)},t.prototype.collectPatternsRecursive=function(e,t,n){if(n){var r,i=void 0;for(i=0,r=this.patterns.length;i<r;i++)e.getRule(this.patterns[i]).collectPatternsRecursive(e,t,!1)}else t.push(this._begin)},t.prototype.compile=function(e,t,n,r){return this._precompile(e),this._cachedCompiledPatterns.compile(e,n,r)},t.prototype._precompile=function(e){this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new eA,this.collectPatternsRecursive(e,this._cachedCompiledPatterns,!0))},t.prototype.compileWhile=function(e,t,n,r){return this._precompileWhile(e),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,t),this._cachedCompiledWhilePatterns.compile(e,n,r)},t.prototype._precompileWhile=function(e){this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new eA,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while))},t}(ev);V.BeginWhileRule=ex;var eR=function(){function e(){}return e.createCaptureRule=function(e,t,n,r,i){return e.registerRule((function(e){return new e_(t,e,n,r,i)}))},e.getCompiledRuleId=function(t,n,r){return t.id||n.registerRule((function(i){return t.id=i,t.match?new eS(t.$vscodeTextmateLocation,t.id,t.name,t.match,e._compileCaptures(t.captures,n,r)):t.begin?t.while?new ex(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.while,e._compileCaptures(t.whileCaptures||t.captures,n,r),e._compilePatterns(t.patterns,n,r)):new ek(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,t.begin,e._compileCaptures(t.beginCaptures||t.captures,n,r),t.end,e._compileCaptures(t.endCaptures||t.captures,n,r),t.applyEndPatternLast,e._compilePatterns(t.patterns,n,r)):(t.repository&&(r=X.mergeObjects({},r,t.repository)),new eC(t.$vscodeTextmateLocation,t.id,t.name,t.contentName,e._compilePatterns(t.patterns,n,r)))})),t.id},e._compileCaptures=function(t,n,r){var i,o,s,a,u=[];if(t){for(a in o=0,t)"$vscodeTextmateLocation"!==a&&(i=parseInt(a,10))>o&&(o=i);for(s=0;s<=o;s++)u[s]=null;for(a in t)if("$vscodeTextmateLocation"!==a){i=parseInt(a,10);var l=0;t[a].patterns&&(l=e.getCompiledRuleId(t[a],n,r)),u[i]=e.createCaptureRule(n,t[a].$vscodeTextmateLocation,t[a].name,t[a].contentName,l)}}return u},e._compilePatterns=function(t,n,r){var i,o,s,a,u,l,c,h=[];if(t)for(o=0,s=t.length;o<s;o++){if(a=-1,(i=t[o]).include)if("#"===i.include.charAt(0)){var f=r[i.include.substr(1)];f&&(a=e.getCompiledRuleId(f,n,r))}else if("$base"===i.include||"$self"===i.include)a=e.getCompiledRuleId(r[i.include],n,r);else{var p=null,d=null,g=i.include.indexOf("#");if(g>=0?(p=i.include.substring(0,g),d=i.include.substring(g+1)):p=i.include,u=n.getExternalGrammar(p,r))if(d){var m=u.repository[d];m&&(a=e.getCompiledRuleId(m,n,u.repository))}else a=e.getCompiledRuleId(u.repository.$self,n,u.repository)}else a=e.getCompiledRuleId(i,n,r);if(-1!==a){if(c=!1,((l=n.getRule(a))instanceof eC||l instanceof ek||l instanceof ex)&&l.hasMissingPatterns&&0===l.patterns.length&&(c=!0),c)continue;h.push(a)}}return{patterns:h,hasMissingPatterns:(t?t.length:0)!==h.length}},e}();V.RuleFactory=eR;var eT={};function eE(e){return e&&e.match(/[\w\.:]+/)}Object.defineProperty(eT,"__esModule",{value:!0}),eT.createMatchers=function(e,t){for(var n,r,i=[],o=(r=(n=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g).exec(e),{next:function(){if(!r)return null;var t=r[0];return r=n.exec(e),t}}),s=o.next();null!==s;){var a=0;if(2===s.length&&":"===s.charAt(1)){switch(s.charAt(0)){case"R":a=1;break;case"L":a=-1;break;default:console.log("Unknown priority "+s+" in scope selector")}s=o.next()}var u=c();if(u&&i.push({matcher:u,priority:a}),","!==s)break;s=o.next()}return i;function l(){if("-"===s){s=o.next();var e=l();return function(t){return e&&!e(t)}}if("("===s){s=o.next();var n=function(){for(var e=[],t=c();t&&(e.push(t),"|"===s||","===s);){do{s=o.next()}while("|"===s||","===s);t=c()}return function(t){return e.some((function(e){return e(t)}))}}();return")"===s&&(s=o.next()),n}if(eE(s)){var r=[];do{r.push(s),s=o.next()}while(eE(s));return function(e){return t(r,e)}}return null}function c(){for(var e=[],t=l();t;)e.push(t),t=l();return function(t){return e.every((function(e){return e(t)}))}}};var eP={};function eI(e,t){for(var n=0,r=t.length;n<r;n++){Array.isArray(t[n].patterns)&&eI(e,t[n].patterns);var i=t[n].include;if(i&&"$base"!==i&&"$self"!==i&&"#"!==i.charAt(0)){var o=i.indexOf("#");o>=0?e[i.substring(0,o)]=!0:e[i]=!0}}}function eM(e,t){if(t.length<e.length)return!1;var n=0;return e.every((function(e){for(var r=n;r<t.length;r++)if(function(e,t){if(!e)return!1;if(e===t)return!0;var n=t.length;return e.length>n&&e.substr(0,n)===t&&"."===e[n]}(t[r],e))return n=r+1,!0;return!1}))}function eO(e,t,n,r,i){for(var o=eT.createMatchers(t,eM),s=V.RuleFactory.getCompiledRuleId(n,r,i.repository),a=0;a<o.length;a++){var u=o[a];e.push({matcher:u.matcher,ruleId:s,grammar:i,priority:u.priority})}}Object.defineProperty(eP,"__esModule",{value:!0}),eP.CAPTURE_METADATA=void 0!==et&&!1,eP.IN_DEBUG_MODE=void 0!==et&&!1,J.createGrammar=function(e,t,n,r,i){return new eG(e,t,n,r,i)},J.collectIncludedScopes=function(e,t){t.patterns&&Array.isArray(t.patterns)&&eI(e,t.patterns),t.repository&&function e(t,n){for(var r in n){var i=n[r];i.patterns&&Array.isArray(i.patterns)&&eI(t,i.patterns),i.repository&&e(t,i.repository)}}(e,t.repository),delete e[t.scopeName]};var eN=function(e,t,n,r){this.scopeName=e,this.languageId=t,this.tokenType=n,this.themeData=r};J.ScopeMetadata=eN;var eL=function(){function e(t,n,r){if(this._initialLanguage=t,this._themeProvider=n,this.onDidChangeTheme(),this._embeddedLanguages=Object.create(null),r)for(var i=Object.keys(r),o=0,s=i.length;o<s;o++){var a=i[o],u=r[a];"number"==typeof u&&0!==u?this._embeddedLanguages[a]=u:console.warn("Invalid embedded language found at scope "+a+": <<"+u+">>")}var l=Object.keys(this._embeddedLanguages).map((function(t){return e._escapeRegExpCharacters(t)}));0===l.length?this._embeddedLanguagesRegex=null:(l.sort(),l.reverse(),this._embeddedLanguagesRegex=RegExp("^(("+l.join(")|(")+"))($|\\.)",""))}return e.prototype.onDidChangeTheme=function(){this._cache=Object.create(null),this._defaultMetaData=new eN("",this._initialLanguage,0,[this._themeProvider.getDefaults()])},e.prototype.getDefaultMetadata=function(){return this._defaultMetaData},e._escapeRegExpCharacters=function(e){return e.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")},e.prototype.getMetadataForScope=function(t){if(null===t)return e._NULL_SCOPE_METADATA;var n=this._cache[t];return n||(n=this._doGetMetadataForScope(t),this._cache[t]=n),n},e.prototype._doGetMetadataForScope=function(e){var t=this._scopeToLanguage(e),n=this._toStandardTokenType(e),r=this._themeProvider.themeMatch(e);return new eN(e,t,n,r)},e.prototype._scopeToLanguage=function(e){if(!e||!this._embeddedLanguagesRegex)return 0;var t=e.match(this._embeddedLanguagesRegex);return t&&(this._embeddedLanguages[t[1]]||0)||0},e.prototype._toStandardTokenType=function(t){var n=t.match(e.STANDARD_TOKEN_TYPE_REGEXP);if(!n)return 0;switch(n[1]){case"comment":return 1;case"string":return 2;case"regex":return 4;case"meta.embedded":return 8}throw Error("Unexpected match for standard token type!")},e._NULL_SCOPE_METADATA=new eN("",0,0,null),e.STANDARD_TOKEN_TYPE_REGEXP=/\b(comment|string|regex|meta\.embedded)\b/,e}(),eG=function(){function e(e,t,n,r,i){if(this._scopeMetadataProvider=new eL(t,i,n),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[],this._includedGrammars={},this._grammarRepository=i,this._grammar=eD(e,null),this._tokenTypeMatchers=[],r)for(var o=0,s=Object.keys(r);o<s.length;o++)for(var a=s[o],u=eT.createMatchers(a,eM),l=0;l<u.length;l++){var c=u[l];this._tokenTypeMatchers.push({matcher:c.matcher,type:r[a]})}}return e.prototype.onDidChangeTheme=function(){this._scopeMetadataProvider.onDidChangeTheme()},e.prototype.getMetadataForScope=function(e){return this._scopeMetadataProvider.getMetadataForScope(e)},e.prototype.getInjections=function(){var e=this;if(!this._injections){this._injections=[];var t=this._grammar.injections;if(t)for(var n in t)eO(this._injections,n,t[n],this,this._grammar);if(this._grammarRepository){var r=this._grammarRepository.injections(this._grammar.scopeName);r&&r.forEach((function(t){var n=e.getExternalGrammar(t);if(n){var r=n.injectionSelector;r&&eO(e._injections,r,n,e,n)}}))}this._injections.sort((function(e,t){return e.priority-t.priority}))}return this._injections.length,this._injections},e.prototype.registerRule=function(e){var t=++this._lastRuleId,n=e(t);return this._ruleId2desc[t]=n,n},e.prototype.getRule=function(e){return this._ruleId2desc[e]},e.prototype.getExternalGrammar=function(e,t){if(this._includedGrammars[e])return this._includedGrammars[e];if(this._grammarRepository){var n=this._grammarRepository.lookup(e);if(n)return this._includedGrammars[e]=eD(n,t&&t.$base),this._includedGrammars[e]}},e.prototype.tokenizeLine=function(e,t){var n=this._tokenize(e,t,!1);return{tokens:n.lineTokens.getResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},e.prototype.tokenizeLine2=function(e,t){var n=this._tokenize(e,t,!0);return{tokens:n.lineTokens.getBinaryResult(n.ruleStack,n.lineLength),ruleStack:n.ruleStack}},e.prototype._tokenize=function(e,t,n){if(-1===this._rootId&&(this._rootId=V.RuleFactory.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository)),t&&t!==eH.NULL)r=!1,t.reset();else{r=!0;var r,i=this._scopeMetadataProvider.getDefaultMetadata(),o=i.themeData[0],s=eF.set(0,i.languageId,i.tokenType,o.fontStyle,o.foreground,o.background),a=this.getRule(this._rootId).getName(null,null),u=this._scopeMetadataProvider.getMetadataForScope(a),l=eW.mergeMetadata(s,null,u),c=new eW(null,a,l);t=new eH(null,this._rootId,-1,null,c,c)}e+="\n";var h=V.createOnigString(e),f=V.getString(h).length,p=new ez(n,e,this._tokenTypeMatchers);return{lineLength:f,lineTokens:p,ruleStack:eU(this,h,r,0,t,p)}},e}();function eD(e,t){return(e=X.clone(e)).repository=e.repository||{},e.repository.$self={$vscodeTextmateLocation:e.$vscodeTextmateLocation,patterns:e.patterns,name:e.scopeName},e.repository.$base=t||e.repository.$self,e}function ej(e,t,n,r,i,o,s){if(0!==o.length){for(var a=Math.min(o.length,s.length),u=[],l=s[0].end,c=0;c<a;c++){var h=o[c];if(null!==h){var f=s[c];if(0!==f.length){if(f.start>l)break;for(;u.length>0&&u[u.length-1].endPos<=f.start;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop();if(u.length>0?i.produceFromScopes(u[u.length-1].scopes,f.start):i.produce(r,f.start),h.retokenizeCapturedWithRuleId){var p=h.getName(V.getString(t),s),d=r.contentNameScopesList.push(e,p),g=h.getContentName(V.getString(t),s),m=d.push(e,g),y=r.push(h.retokenizeCapturedWithRuleId,f.start,null,d,m);eU(e,V.createOnigString(V.getString(t).substring(0,f.end)),n&&0===f.start,f.start,y,i);continue}var v=h.getName(V.getString(t),s);if(null!==v){var _=(u.length>0?u[u.length-1].scopes:r.contentNameScopesList).push(e,v);u.push(new e$(_,f.end))}}}}for(;u.length>0;)i.produceFromScopes(u[u.length-1].scopes,u[u.length-1].endPos),u.pop()}}function eB(e){for(var t=[],n=0,r=e.rules.length;n<r;n++)t.push("   - "+e.rules[n]+": "+e.debugRegExps[n]);return t.join("\n")}function eU(e,t,n,r,i,o){var s=V.getString(t).length,a=!1,u=function(e,t,n,r,i,o){for(var s=-1,a=[],u=i;u;u=u.pop()){var l=u.getRule(e);l instanceof V.BeginWhileRule&&a.push({rule:l,stack:u})}for(var c=a.pop();c;c=a.pop()){var h=c.rule.compileWhile(e,c.stack.endRule,n,s===r),f=h.scanner.findNextMatchSync(t,r);if(eP.IN_DEBUG_MODE&&(console.log("  scanning for while rule"),console.log(eB(h))),!f){i=c.stack.pop();break}if(-2!==h.rules[f.index]){i=c.stack.pop();break}f.captureIndices&&f.captureIndices.length&&(o.produce(c.stack,f.captureIndices[0].start),ej(e,t,n,c.stack,o,c.rule.whileCaptures,f.captureIndices),o.produce(c.stack,f.captureIndices[0].end),s=f.captureIndices[0].end,f.captureIndices[0].end>r&&(r=f.captureIndices[0].end,n=!1))}return{stack:i,linePos:r,anchorPosition:s,isFirstLine:n}}(e,t,n,r,i,o);i=u.stack,r=u.linePos,n=u.isFirstLine;for(var l=u.anchorPosition;!a;)!function(){eP.IN_DEBUG_MODE&&(console.log(""),console.log("@@scanNext: |"+V.getString(t).replace(/\n$/,"\\n").substr(r)+"|"));var u=function(e,t,n,r,i,o){var s,a,u=(a=(s=i.getRule(e).compile(e,i.endRule,n,r===o)).scanner.findNextMatchSync(t,r),eP.IN_DEBUG_MODE&&(console.log("  scanning for"),console.log(eB(s))),a?{captureIndices:a.captureIndices,matchedRuleId:s.rules[a.index]}:null),l=e.getInjections();if(0===l.length)return u;var c=function(e,t,n,r,i,o,s){for(var a,u=Number.MAX_VALUE,l=null,c=0,h=o.contentNameScopesList.generateScopes(),f=0,p=e.length;f<p;f++){var d=e[f];if(d.matcher(h)){var g=t.getRule(d.ruleId).compile(t,null,r,i===s),m=g.scanner.findNextMatchSync(n,i);if(eP.IN_DEBUG_MODE&&(console.log("  scanning for injections"),console.log(eB(g))),m){var y=m.captureIndices[0].start;if(!(y>=u)&&(u=y,l=m.captureIndices,a=g.rules[m.index],c=d.priority,u===i))break}}}return l?{priorityMatch:-1===c,captureIndices:l,matchedRuleId:a}:null}(l,e,t,n,r,i,o);if(!c)return u;if(!u)return c;var h=u.captureIndices[0].start,f=c.captureIndices[0].start;return f<h||c.priorityMatch&&f===h?c:u}(e,t,n,r,i,l);if(!u)return eP.IN_DEBUG_MODE&&console.log("  no more matches."),o.produce(i,s),void(a=!0);var c=u.captureIndices,h=u.matchedRuleId,f=!!c&&c.length>0&&c[0].end>r;if(-1===h){var p=i.getRule(e);eP.IN_DEBUG_MODE&&console.log("  popping "+p.debugName+" - "+p.debugEndRegExp),o.produce(i,c[0].start),i=i.setContentNameScopesList(i.nameScopesList),ej(e,t,n,i,o,p.endCaptures,c),o.produce(i,c[0].end);var d=i;if(i=i.pop(),!f&&d.getEnterPos()===r)return console.error("[1] - Grammar is in an endless loop - Grammar pushed & popped a rule without advancing"),i=d,o.produce(i,s),void(a=!0)}else{var g=e.getRule(h);o.produce(i,c[0].start);var m=i,y=g.getName(V.getString(t),c),v=i.contentNameScopesList.push(e,y);if(i=i.push(h,r,null,v,v),g instanceof V.BeginEndRule){var _=g;eP.IN_DEBUG_MODE&&console.log("  pushing "+_.debugName+" - "+_.debugBeginRegExp),ej(e,t,n,i,o,_.beginCaptures,c),o.produce(i,c[0].end),l=c[0].end;var b=_.getContentName(V.getString(t),c),w=v.push(e,b);if(i=i.setContentNameScopesList(w),_.endHasBackReferences&&(i=i.setEndRule(_.getEndWithResolvedBackReferences(V.getString(t),c))),!f&&m.hasSameRuleAs(i))return console.error("[2] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),o.produce(i,s),void(a=!0)}else if(g instanceof V.BeginWhileRule){_=g;eP.IN_DEBUG_MODE&&console.log("  pushing "+_.debugName),ej(e,t,n,i,o,_.beginCaptures,c),o.produce(i,c[0].end),l=c[0].end;b=_.getContentName(V.getString(t),c),w=v.push(e,b);if(i=i.setContentNameScopesList(w),_.whileHasBackReferences&&(i=i.setEndRule(_.getWhileWithResolvedBackReferences(V.getString(t),c))),!f&&m.hasSameRuleAs(i))return console.error("[3] - Grammar is in an endless loop - Grammar pushed the same rule without advancing"),i=i.pop(),o.produce(i,s),void(a=!0)}else if(eP.IN_DEBUG_MODE&&console.log("  matched "+g.debugName+" - "+g.debugMatchRegExp),ej(e,t,n,i,o,g.captures,c),o.produce(i,c[0].end),i=i.pop(),!f)return console.error("[4] - Grammar is in an endless loop - Grammar is not advancing, nor is it pushing/popping"),i=i.safePop(),o.produce(i,s),void(a=!0)}c[0].end>r&&(r=c[0].end,n=!1)}();return i}J.Grammar=eG;var eF=function(){function e(){}return e.toBinaryStr=function(e){for(var t=e.toString(2);t.length<32;)t="0"+t;return t},e.printMetadata=function(t){console.log({languageId:e.getLanguageId(t),tokenType:e.getTokenType(t),fontStyle:e.getFontStyle(t),foreground:e.getForeground(t),background:e.getBackground(t)})},e.getLanguageId=function(e){return(255&e)>>>0},e.getTokenType=function(e){return(1792&e)>>>8},e.getFontStyle=function(e){return(14336&e)>>>11},e.getForeground=function(e){return(8372224&e)>>>14},e.getBackground=function(e){return(4286578688&e)>>>23},e.set=function(t,n,r,i,o,s){var a=e.getLanguageId(t),u=e.getTokenType(t),l=e.getFontStyle(t),c=e.getForeground(t),h=e.getBackground(t);return 0!==n&&(a=n),0!==r&&(u=8===r?0:r),-1!==i&&(l=i),0!==o&&(c=o),0!==s&&(h=s),(a<<0|u<<8|l<<11|c<<14|h<<23)>>>0},e}();J.StackElementMetadata=eF;var eW=function(){function e(e,t,n){this.parent=e,this.scope=t,this.metadata=n}return e._equals=function(e,t){for(;;){if(e===t)return!0;if(e.scope!==t.scope||e.metadata!==t.metadata)return!1;if(e=e.parent,t=t.parent,!e&&!t)return!0;if(!e||!t)return!1}},e.prototype.equals=function(t){return e._equals(this,t)},e._matchesScope=function(e,t,n){return t===e||e.substring(0,n.length)===n},e._matches=function(e,t){if(null===t)return!0;for(var n=t.length,r=0,i=t[0],o=i+".";e;){if(this._matchesScope(e.scope,i,o)){if(++r===n)return!0;o=(i=t[r])+"."}e=e.parent}return!1},e.mergeMetadata=function(e,t,n){if(null===n)return e;var r=-1,i=0,o=0;if(null!==n.themeData)for(var s=0,a=n.themeData.length;s<a;s++){var u=n.themeData[s];if(this._matches(t,u.parentScopes)){r=u.fontStyle,i=u.foreground,o=u.background;break}}return eF.set(e,n.languageId,n.tokenType,r,i,o)},e._push=function(t,n,r){for(var i=0,o=r.length;i<o;i++){var s=r[i],a=n.getMetadataForScope(s),u=e.mergeMetadata(t.metadata,t,a);t=new e(t,s,u)}return t},e.prototype.push=function(t,n){return null===n?this:n.indexOf(" ")>=0?e._push(this,t,n.split(/ /g)):e._push(this,t,[n])},e._generateScopes=function(e){for(var t=[],n=0;e;)t[n++]=e.scope,e=e.parent;return t.reverse(),t},e.prototype.generateScopes=function(){return e._generateScopes(this)},e}();J.ScopeListElement=eW;var eH=function(){function e(e,t,n,r,i,o){this.parent=e,this.depth=this.parent?this.parent.depth+1:1,this.ruleId=t,this._enterPos=n,this.endRule=r,this.nameScopesList=i,this.contentNameScopesList=o}return e._structuralEquals=function(e,t){for(;;){if(e===t)return!0;if(e.depth!==t.depth||e.ruleId!==t.ruleId||e.endRule!==t.endRule)return!1;if(e=e.parent,t=t.parent,!e&&!t)return!0;if(!e||!t)return!1}},e._equals=function(e,t){return e===t||!!this._structuralEquals(e,t)&&e.contentNameScopesList.equals(t.contentNameScopesList)},e.prototype.clone=function(){return this},e.prototype.equals=function(t){return null!==t&&e._equals(this,t)},e._reset=function(e){for(;e;)e._enterPos=-1,e=e.parent},e.prototype.reset=function(){e._reset(this)},e.prototype.pop=function(){return this.parent},e.prototype.safePop=function(){return this.parent?this.parent:this},e.prototype.push=function(t,n,r,i,o){return new e(this,t,n,r,i,o)},e.prototype.getEnterPos=function(){return this._enterPos},e.prototype.getRule=function(e){return e.getRule(this.ruleId)},e.prototype._writeString=function(e,t){return this.parent&&(t=this.parent._writeString(e,t)),e[t++]="("+this.ruleId+", TODO-"+this.nameScopesList+", TODO-"+this.contentNameScopesList+")",t},e.prototype.toString=function(){var e=[];return this._writeString(e,0),"["+e.join(",")+"]"},e.prototype.setContentNameScopesList=function(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this.endRule,this.nameScopesList,e)},e.prototype.setEndRule=function(t){return this.endRule===t?this:new e(this.parent,this.ruleId,this._enterPos,t,this.nameScopesList,this.contentNameScopesList)},e.prototype.hasSameRuleAs=function(e){return this.ruleId===e.ruleId},e.NULL=new e(null,0,0,null,null,null),e}();J.StackElement=eH;var e$=function(e,t){this.scopes=e,this.endPos=t};J.LocalStackElement=e$;var ez=function(){function e(e,t,n){this._emitBinaryTokens=e,this._tokenTypeOverrides=n,eP.IN_DEBUG_MODE&&(this._lineText=t),this._emitBinaryTokens?this._binaryTokens=[]:this._tokens=[],this._lastTokenEndIndex=0}return e.prototype.produce=function(e,t){this.produceFromScopes(e.contentNameScopesList,t)},e.prototype.produceFromScopes=function(e,t){if(!(this._lastTokenEndIndex>=t)){if(this._emitBinaryTokens){for(var n=e.metadata,r=0,i=this._tokenTypeOverrides;r<i.length;r++){var o=i[r];o.matcher(e.generateScopes())&&(n=eF.set(n,0,function(e){switch(e){case 4:return 4;case 2:return 2;case 1:return 1;default:return 8}}(o.type),-1,0,0))}return this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===n||(this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(n)),void(this._lastTokenEndIndex=t)}var s=e.generateScopes();if(eP.IN_DEBUG_MODE){console.log("  token: |"+this._lineText.substring(this._lastTokenEndIndex,t).replace(/\n$/,"\\n")+"|");for(var a=0;a<s.length;a++)console.log("      * "+s[a])}this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:t,scopes:s}),this._lastTokenEndIndex=t}},e.prototype.getResult=function(e,t){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===t-1&&this._tokens.pop(),0===this._tokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._tokens[this._tokens.length-1].startIndex=0),this._tokens},e.prototype.getBinaryResult=function(e,t){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===t-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),0===this._binaryTokens.length&&(this._lastTokenEndIndex=-1,this.produce(e,t),this._binaryTokens[this._binaryTokens.length-2]=0);for(var n=new Uint32Array(this._binaryTokens.length),r=0,i=this._binaryTokens.length;r<i;r++)n[r]=this._binaryTokens[r];return n},e}(),eq=function(){function e(e){this._theme=e,this._grammars={},this._rawGrammars={},this._injectionGrammars={}}return e.prototype.setTheme=function(e){var t=this;this._theme=e,Object.keys(this._grammars).forEach((function(e){t._grammars[e].onDidChangeTheme()}))},e.prototype.getColorMap=function(){return this._theme.getColorMap()},e.prototype.addGrammar=function(e,t){this._rawGrammars[e.scopeName]=e;var n={};return J.collectIncludedScopes(n,e),t&&(this._injectionGrammars[e.scopeName]=t,t.forEach((function(e){n[e]=!0}))),Object.keys(n)},e.prototype.lookup=function(e){return this._rawGrammars[e]},e.prototype.injections=function(e){return this._injectionGrammars[e]},e.prototype.getDefaults=function(){return this._theme.getDefaults()},e.prototype.themeMatch=function(e){return this._theme.match(e)},e.prototype.grammarForScopeName=function(e,t,n,r){if(!this._grammars[e]){var i=this._rawGrammars[e];if(!i)return null;this._grammars[e]=J.createGrammar(i,t,n,r,this)}return this._grammars[e]},e}();Q.SyncRegistry=eq;var eQ={};function eJ(e,t,n){var r=e.length,i=0,o=1,s=0;function a(t){if(null===n)i+=t;else for(;t>0;)10===e.charCodeAt(i)?(i++,o++,s=0):(i++,s++),t--}function u(e){null===n?i=e:a(e-i)}function l(){for(;i<r;){var t=e.charCodeAt(i);if(32!==t&&9!==t&&13!==t&&10!==t)break;a(1)}}function c(t){return e.substr(i,t.length)===t&&(a(t.length),!0)}function h(t){var n=e.indexOf(t,i);u(-1!==n?n+t.length:r)}function f(t){var n=e.indexOf(t,i);if(-1!==n){var o=e.substring(i,n);return u(n+t.length),o}o=e.substr(i);return u(r),o}r>0&&65279===e.charCodeAt(0)&&(i=1);var p=0,d=null,g=[],m=[],y=null;function v(e,t){g.push(p),m.push(d),p=e,d=t}function _(){if(0===g.length)return b("illegal state stack");p=g.pop(),d=m.pop()}function b(t){throw Error("Near offset "+i+": "+t+" ~~~"+e.substr(i,50)+"~~~")}var w=function(){if(null===y)return b("missing <key>");var e={};null!==n&&(e[n]={filename:t,line:o,char:s}),d[y]=e,y=null,v(1,e)},A=function(){if(null===y)return b("missing <key>");var e=[];d[y]=e,y=null,v(2,e)},S=function(){var e={};null!==n&&(e[n]={filename:t,line:o,char:s}),d.push(e),v(1,e)},C=function(){var e=[];d.push(e),v(2,e)};function k(){if(1!==p)return b("unexpected </dict>");_()}function x(){return 1===p||2!==p?b("unexpected </array>"):void _()}function R(e){if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}function T(e){if(e.isClosed)return"";var t=f("</");return h(">"),t.replace(/&#([0-9]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,10))})).replace(/&#x([0-9a-f]+);/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/&amp;|&lt;|&gt;|&quot;|&apos;/g,(function(e){switch(e){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'"}return e}))}for(;i<r&&(l(),!(i>=r));){var P=e.charCodeAt(i);if(a(1),60!==P)return b("expected <");if(i>=r)return b("unexpected end of input");var E=e.charCodeAt(i);if(63!==E)if(33!==E){if(47===E){if(a(1),l(),c("plist")){h(">");continue}if(c("dict")){h(">"),k();continue}if(c("array")){h(">"),x();continue}return b("unexpected closed tag")}var I=function(){var e=f(">"),t=!1;return 47===e.charCodeAt(e.length-1)&&(t=!0,e=e.substring(0,e.length-1)),{name:e.trim(),isClosed:t}}();switch(I.name){case"dict":1===p?w():2===p?S():(d={},null!==n&&(d[n]={filename:t,line:o,char:s}),v(1,d)),I.isClosed&&k();continue;case"array":1===p?A():2===p?C():v(2,d=[]),I.isClosed&&x();continue;case"key":!function(e){if(1===p){if(null!==y)return b("too many <key>");y=e}else b("unexpected <key>")}(T(I));continue;case"string":!function(e){if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}(T(I));continue;case"real":!function(e){if(isNaN(e))return b("cannot parse float");if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}(parseFloat(T(I)));continue;case"integer":!function(e){if(isNaN(e))return b("cannot parse integer");if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}(parseInt(T(I),10));continue;case"date":!function(e){if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}(new Date(T(I)));continue;case"data":!function(e){if(1===p){if(null===y)return b("missing <key>");d[y]=e,y=null}else 2===p?d.push(e):d=e}(T(I));continue;case"true":T(I),R(!0);continue;case"false":T(I),R(!1);continue}if(!/^plist/.test(I.name))return b("unexpected opened tag "+I.name)}else{if(a(1),c("--")){h("--\x3e");continue}h(">")}else a(1),h("?>")}return d}Object.defineProperty(eQ,"__esModule",{value:!0}),i=o=void 0,o=function(e,t,n){return eJ(e,t,n)},i=function(e){return eJ(e,null,null)};var eX={};function eY(e,t){throw Error("Near offset "+e.pos+": "+t+" ~~~"+e.source.substr(e.pos,50)+"~~~")}Object.defineProperty(eX,"__esModule",{value:!0}),eX.parse=function(e,t,n){var r=new eK(e),i=new eV,o=0,s=null,a=[],u=[];function l(){a.push(o),u.push(s)}function c(){o=a.pop(),s=u.pop()}function h(e){eY(r,e)}for(;eZ(r,i);){if(0===o){if(null!==s&&h("too many constructs in root"),3===i.type){s={},n&&(s.$vscodeTextmateLocation=i.toLocation(t)),l(),o=1;continue}if(2===i.type){s=[],l(),o=4;continue}h("unexpected token in root")}if(2===o){if(5===i.type){c();continue}if(7===i.type){o=3;continue}h("expected , or }")}if(1===o||3===o){if(1===o&&5===i.type){c();continue}if(1===i.type){var f=i.value;if(eZ(r,i)&&6===i.type||h("expected colon"),eZ(r,i)||h("expected value"),o=2,1===i.type){s[f]=i.value;continue}if(8===i.type){s[f]=null;continue}if(9===i.type){s[f]=!0;continue}if(10===i.type){s[f]=!1;continue}if(11===i.type){s[f]=parseFloat(i.value);continue}if(2===i.type){var p=[];s[f]=p,l(),o=4,s=p;continue}if(3===i.type){var d={};n&&(d.$vscodeTextmateLocation=i.toLocation(t)),s[f]=d,l(),o=1,s=d;continue}}h("unexpected token in dict")}if(5===o){if(4===i.type){c();continue}if(7===i.type){o=6;continue}h("expected , or ]")}if(4===o||6===o){if(4===o&&4===i.type){c();continue}if(o=5,1===i.type){s.push(i.value);continue}if(8===i.type){s.push(null);continue}if(9===i.type){s.push(!0);continue}if(10===i.type){s.push(!1);continue}if(11===i.type){s.push(parseFloat(i.value));continue}if(2===i.type){p=[];s.push(p),l(),o=4,s=p;continue}if(3===i.type){d={};n&&(d.$vscodeTextmateLocation=i.toLocation(t)),s.push(d),l(),o=1,s=d;continue}h("unexpected token in array")}h("unknown state")}return 0!==u.length&&h("unclosed constructs"),s};var eK=function(e){this.source=e,this.pos=0,this.len=e.length,this.line=1,this.char=0},eV=function(){function e(){this.value=null,this.offset=-1,this.len=-1,this.line=-1,this.char=-1}return e.prototype.toLocation=function(e){return{filename:e,line:this.line,char:this.char}},e}();function eZ(e,t){t.value=null,t.type=0,t.offset=-1,t.len=-1,t.line=-1,t.char=-1;for(var n,r=e.source,i=e.pos,o=e.len,s=e.line,a=e.char;;){if(i>=o)return!1;if(32!==(n=r.charCodeAt(i))&&9!==n&&13!==n){if(10!==n)break;i++,s++,a=0}else i++,a++}if(t.offset=i,t.line=s,t.char=a,34===n){for(t.type=1,i++,a++;;){if(i>=o)return!1;if(n=r.charCodeAt(i),i++,a++,92!==n){if(34===n)break}else i++,a++}t.value=r.substring(t.offset+1,i-1).replace(/\\u([0-9A-Fa-f]{4})/g,(function(e,t){return String.fromCodePoint(parseInt(t,16))})).replace(/\\(.)/g,(function(t,n){switch(n){case'"':return'"';case"\\":return"\\";case"/":return"/";case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";default:eY(e,"invalid escape sequence")}}))}else if(91===n)t.type=2,i++,a++;else if(123===n)t.type=3,i++,a++;else if(93===n)t.type=4,i++,a++;else if(125===n)t.type=5,i++,a++;else if(58===n)t.type=6,i++,a++;else if(44===n)t.type=7,i++,a++;else if(110===n){if(t.type=8,i++,a++,117!==(n=r.charCodeAt(i))||(i++,a++,108!==(n=r.charCodeAt(i)))||(i++,a++,108!==(n=r.charCodeAt(i))))return!1;i++,a++}else if(116===n){if(t.type=9,i++,a++,114!==(n=r.charCodeAt(i))||(i++,a++,117!==(n=r.charCodeAt(i)))||(i++,a++,101!==(n=r.charCodeAt(i))))return!1;i++,a++}else if(102===n){if(t.type=10,i++,a++,97!==(n=r.charCodeAt(i))||(i++,a++,108!==(n=r.charCodeAt(i)))||(i++,a++,115!==(n=r.charCodeAt(i)))||(i++,a++,101!==(n=r.charCodeAt(i))))return!1;i++,a++}else for(t.type=11;;){if(i>=o)return!1;if(!(46===(n=r.charCodeAt(i))||n>=48&&n<=57||101===n||69===n||45===n||43===n))break;i++,a++}return t.len=i-t.offset,null===t.value&&(t.value=r.substr(t.offset,t.len)),e.pos=i,e.line=s,e.char=a,!0}eQ.parseJSONGrammar=function(e,t){return eP.CAPTURE_METADATA?eX.parse(e,t,!0):JSON.parse(e)},eQ.parsePLISTGrammar=function(e,t){return eP.CAPTURE_METADATA?o(e,t,"$vscodeTextmateLocation"):i(e)};var e0={};Object.defineProperty(e0,"__esModule",{value:!0});var e1=function(e,t,n,r,i,o){this.scope=e,this.parentScopes=t,this.index=n,this.fontStyle=r,this.foreground=i,this.background=o};function e2(e){return!!(/^#[0-9a-f]{6}$/i.test(e)||/^#[0-9a-f]{8}$/i.test(e)||/^#[0-9a-f]{3}$/i.test(e)||/^#[0-9a-f]{4}$/i.test(e))}function e4(e){if(!e||!e.settings||!Array.isArray(e.settings))return[];for(var t=e.settings,n=[],r=0,i=0,o=t.length;i<o;i++){var s=t[i];if(s.settings){var a=void 0;if("string"==typeof s.scope)a=s.scope.replace(/^[,]+/,"").replace(/[,]+$/,"").split(",");else a=Array.isArray(s.scope)?s.scope:[""];var u=-1;if("string"==typeof s.settings.fontStyle){u=0;for(var l=0,c=(p=s.settings.fontStyle.split(" ")).length;l<c;l++)switch(p[l]){case"italic":u|=1;break;case"bold":u|=2;break;case"underline":u|=4}}var h=null;"string"==typeof s.settings.foreground&&e2(s.settings.foreground)&&(h=s.settings.foreground);var f=null;"string"==typeof s.settings.background&&e2(s.settings.background)&&(f=s.settings.background);for(l=0,c=a.length;l<c;l++){var p,d=(p=a[l].trim().split(" "))[p.length-1],g=null;p.length>1&&(g=p.slice(0,p.length-1)).reverse(),n[r++]=new e1(d,g,i,u,h,f)}}}return n}e0.ParsedThemeRule=e1,e0.parseTheme=e4;var e6=function(){function e(){this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null)}return e.prototype.getId=function(e){if(null===e)return 0;e=e.toUpperCase();var t=this._color2id[e];return t||(t=++this._lastColorId,this._color2id[e]=t,this._id2color[t]=e),t},e.prototype.getColorMap=function(){return this._id2color.slice(0)},e}();e0.ColorMap=e6;var e3=function(){function e(e,t,n){this._colorMap=e,this._root=n,this._defaults=t,this._cache={}}return e.createFromRawTheme=function(e){return this.createFromParsedTheme(e4(e))},e.createFromParsedTheme=function(e){return function(e){e.sort((function(e,t){var n=e8(e.scope,t.scope);return 0!==n||0!==(n=e5(e.parentScopes,t.parentScopes))?n:e.index-t.index}));for(var t=0,n="#000000",r="#ffffff";e.length>=1&&""===e[0].scope;){var i=e.shift();-1!==i.fontStyle&&(t=i.fontStyle),null!==i.foreground&&(n=i.foreground),null!==i.background&&(r=i.background)}for(var o=new e6,s=new e7(0,null,t,o.getId(n),o.getId(r)),a=new e9(new e7(0,null,-1,0,0),[]),u=0,l=e.length;u<l;u++){var c=e[u];a.insert(0,c.scope,c.parentScopes,c.fontStyle,o.getId(c.foreground),o.getId(c.background))}return new e3(o,s,a)}(e)},e.prototype.getColorMap=function(){return this._colorMap.getColorMap()},e.prototype.getDefaults=function(){return this._defaults},e.prototype.match=function(e){return this._cache.hasOwnProperty(e)||(this._cache[e]=this._root.match(e)),this._cache[e]},e}();function e8(e,t){return e<t?-1:e>t?1:0}function e5(e,t){if(null===e&&null===t)return 0;if(!e)return-1;if(!t)return 1;var n=e.length,r=t.length;if(n===r){for(var i=0;i<n;i++){var o=e8(e[i],t[i]);if(0!==o)return o}return 0}return n-r}e0.Theme=e3,e0.strcmp=e8,e0.strArrCmp=e5;var e7=function(){function e(e,t,n,r,i){this.scopeDepth=e,this.parentScopes=t,this.fontStyle=n,this.foreground=r,this.background=i}return e.prototype.clone=function(){return new e(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)},e.cloneArr=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t[n]=e[n].clone();return t},e.prototype.acceptOverwrite=function(e,t,n,r){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,-1!==t&&(this.fontStyle=t),0!==n&&(this.foreground=n),0!==r&&(this.background=r)},e}();e0.ThemeTrieElementRule=e7;var e9=function(){function e(e,t,n){void 0===t&&(t=[]),void 0===n&&(n={}),this._mainRule=e,this._rulesWithParentScopes=t,this._children=n}return e._sortBySpecificity=function(e){return 1===e.length||e.sort(this._cmpBySpecificity),e},e._cmpBySpecificity=function(e,t){if(e.scopeDepth===t.scopeDepth){var n=e.parentScopes,r=t.parentScopes,i=null===n?0:n.length,o=null===r?0:r.length;if(i===o)for(var s=0;s<i;s++){var a=n[s].length,u=r[s].length;if(a!==u)return u-a}return o-i}return t.scopeDepth-e.scopeDepth},e.prototype.match=function(t){if(""===t)return e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes));var n,r,i=t.indexOf(".");return-1===i?(n=t,r=""):(n=t.substring(0,i),r=t.substring(i+1)),this._children.hasOwnProperty(n)?this._children[n].match(r):e._sortBySpecificity([].concat(this._mainRule).concat(this._rulesWithParentScopes))},e.prototype.insert=function(t,n,r,i,o,s){if(""!==n){var a,u,l,c=n.indexOf(".");-1===c?(a=n,u=""):(a=n.substring(0,c),u=n.substring(c+1)),this._children.hasOwnProperty(a)?l=this._children[a]:(l=new e(this._mainRule.clone(),e7.cloneArr(this._rulesWithParentScopes)),this._children[a]=l),l.insert(t+1,u,r,i,o,s)}else this._doInsertHere(t,r,i,o,s)},e.prototype._doInsertHere=function(e,t,n,r,i){if(null!==t){for(var o=0,s=this._rulesWithParentScopes.length;o<s;o++){var a=this._rulesWithParentScopes[o];if(0===e5(a.parentScopes,t))return void a.acceptOverwrite(e,n,r,i)}-1===n&&(n=this._mainRule.fontStyle),0===r&&(r=this._mainRule.foreground),0===i&&(i=this._mainRule.background),this._rulesWithParentScopes.push(new e7(e,t,n,r,i))}else this._mainRule.acceptOverwrite(e,n,r,i)},e}();e0.ThemeTrieElement=e9;var te={getGrammarDefinition:function(e){return null},getInjections:function(e){return null}},tt=function(){function e(e){void 0===e&&(e=te),this._locator=e,this._syncRegistry=new Q.SyncRegistry(e0.Theme.createFromRawTheme(e.theme)),this.installationQueue=new Map}return e.prototype.setTheme=function(e){this._syncRegistry.setTheme(e0.Theme.createFromRawTheme(e))},e.prototype.getColorMap=function(){return this._syncRegistry.getColorMap()},e.prototype.loadGrammarWithEmbeddedLanguages=function(e,t,n){return this.loadGrammarWithConfiguration(e,t,{embeddedLanguages:n})},e.prototype.loadGrammarWithConfiguration=function(e,t,n){return z(this,void 0,void 0,(function(){return q(this,(function(r){switch(r.label){case 0:return[4,this._loadGrammar(e)];case 1:return r.sent(),[2,this.grammarForScopeName(e,t,n.embeddedLanguages,n.tokenTypes)]}}))}))},e.prototype.loadGrammar=function(e){return z(this,void 0,void 0,(function(){return q(this,(function(t){return[2,this._loadGrammar(e)]}))}))},e.prototype._loadGrammar=function(e,t){return void 0===t&&(t=null),z(this,void 0,void 0,(function(){var n,r=this;return q(this,(function(i){switch(i.label){case 0:return this._syncRegistry.lookup(e)?[2,this.grammarForScopeName(e)]:this.installationQueue.has(e)?[2,this.installationQueue.get(e)]:(n=new Promise((function(n,i){return z(r,void 0,void 0,(function(){var r,i,o,s=this;return q(this,(function(a){switch(a.label){case 0:return[4,this._locator.getGrammarDefinition(e,t)];case 1:if(!(r=a.sent()))throw Error("A tmGrammar load was requested but registry host failed to provide grammar definition");if("json"!==r.format&&"plist"!==r.format||"json"===r.format&&"object"!=typeof r.content&&"string"!=typeof r.content||"plist"===r.format&&"string"!=typeof r.content)throw TypeError('Grammar definition must be an object, either `{ content: string | object, format: "json" }` OR `{ content: string, format: "plist" }`)');return i="json"===r.format?"string"==typeof r.content?eQ.parseJSONGrammar(r.content,"c://fakepath/grammar.json"):r.content:eQ.parsePLISTGrammar(r.content,"c://fakepath/grammar.plist"),o="function"==typeof this._locator.getInjections&&this._locator.getInjections(e),i.scopeName=e,[4,Promise.all(this._syncRegistry.addGrammar(i,o).map((function(t){return z(s,void 0,void 0,(function(){return q(this,(function(n){try{return[2,this._loadGrammar(t,e)]}catch(n){throw Error("While trying to load tmGrammar with scopeId: '"+e+"', it's dependency (scopeId: "+t+") loading errored: "+n.message)}return[2]}))}))})))];case 2:return a.sent(),n(this.grammarForScopeName(e)),[2]}}))}))})),this.installationQueue.set(e,n),[4,n]);case 1:return i.sent(),this.installationQueue.delete(e),[2,n]}}))}))},e.prototype.grammarForScopeName=function(e,t,n,r){return void 0===t&&(t=0),void 0===n&&(n=null),void 0===r&&(r=null),this._syncRegistry.grammarForScopeName(e,t,n,r)},e}();$.Registry=tt,$.INITIAL=J.StackElement.NULL;var tn={};Object.defineProperty(tn,"__esModule",{value:!0}),tn.wireTmGrammars=void 0;var tr={};Object.defineProperty(tr,"__esModule",{value:!0}),tr.TMToMonacoToken=void 0,tr.TMToMonacoToken=(e,t)=>{let n="";for(let e=t[0].length-1;e>=0;e-=1){let r=t[0][e];if("."===r)break;n=r+n}for(let r=t.length-1;r>=0;r-=1){let i=t[r];for(let t=i.length-1;t>=0;t-=1){if("."===i[t]){let r=i.slice(0,t);if(e._themeService._theme._tokenTheme._match(r+"."+n)._foreground>1)return r+"."+n;if(e._themeService._theme._tokenTheme._match(r)._foreground>1)return r}}}return""};class ti{_ruleStack;constructor(e){this._ruleStack=e}get ruleStack(){return this._ruleStack}clone(){return new ti(this._ruleStack)}equals(e){return!!e&&e instanceof ti&&e===this&&e._ruleStack===this._ruleStack}}tn.wireTmGrammars=function(e,t,n,r){return Promise.all(Array.from(n.keys()).map((async i=>{let o=await t.loadGrammar(n.get(i));e.languages.setTokensProvider(i,{getInitialState:()=>new ti($.INITIAL),tokenize:(e,t)=>{let n=o.tokenizeLine(e,t.ruleStack);return{endState:new ti(n.ruleStack),tokens:n.tokens.map((e=>({...e,scopes:r?(0,tr.TMToMonacoToken)(r,e.scopes):e.scopes[e.scopes.length-1]})))}}})})))};export const loadWASM=c.loadWASM;export const Registry=$.Registry;export const wireTmGrammars=tn.wireTmGrammars;