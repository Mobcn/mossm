import{s as store,a as storage,_ as __vitePreload,V as VXETable}from"./index-9e861b44.js";import{ref,computed,inject,h,onMounted,watchEffect,toRaw,reactive,toRefs,nextTick,provide}from"vue";import{_ as _export_sfc,s as service,a as systemService}from"./system-service-b420b3e1.js";const bootstrap="https://cdn.staticfile.org/bootstrap-icons/1.9.1/bootstrap-icons.svg",iconConfig={bootstrap},_hoisted_1$7=["width","height","fill"],_hoisted_2$7=["xlink:href"],_sfc_main$d=Vue.defineComponent({__name:"MoIcon",props:{iconName:{},iconPathName:{default:"bootstrap"},width:{default:16},height:{default:16},fill:{default:"currentColor"}},setup(e){var l;const a=e,o=ref(((l=store.blobIconURL)==null?void 0:l[a.iconPathName])??""),u=computed(()=>`${o.value}#${a.iconName}`);return(()=>{var r,t;if(o.value===""){const i=iconConfig[a.iconPathName];(r=store).requestMap??(r.requestMap={}),(t=store.requestMap)[i]??(t[i]=fetch(i).then(s=>s.blob()).then(s=>{var V;const n=URL.createObjectURL(s);return(V=store).blobIconURL??(V.blobIconURL={}),store.blobIconURL[a.iconPathName]=n,n})),store.requestMap[i].then(s=>o.value=s)}})(),(r,t)=>(Vue.openBlock(),Vue.createElementBlock("svg",{width:r.width,height:r.height,fill:r.fill},[Vue.createElementVNode("use",{"xlink:href":Vue.unref(u)},null,8,_hoisted_2$7)],8,_hoisted_1$7))}}),_withScopeId=e=>(Vue.pushScopeId("data-v-95de42cf"),e=e(),Vue.popScopeId(),e),_hoisted_1$6={class:"w-full h-full flex items-center justify-between"},_hoisted_2$6=_withScopeId(()=>Vue.createElementVNode("div",{class:"text-xl mx-3"},"MOSSM",-1)),_sfc_main$c=Vue.defineComponent({__name:"MoNavbar",setup(e){const a=()=>h(_sfc_main$d,{iconName:"brightness-high-fill",fill:"#606266"}),o=()=>h(_sfc_main$d,{iconName:"moon-fill",fill:"#cfd3dc"}),u=ref(),l=ref(store.theme==="dark"),r=inject("changePage",()=>{throw new Error("找不到changePage方法")});function t(){const s=document.createElement("style");s.innerHTML="* { transition: none !important; }",document.head.appendChild(s);const n=V=>{V.propertyName==="background-color"&&V.target instanceof HTMLElement&&V.target.className==="el-switch__core"&&(document.head.removeChild(s),u.value.removeEventListener("transitionend",n))};u.value.addEventListener("transitionend",n),store.theme=l.value?"dark":"light"}function i(){ElementPlus.ElMessageBox.confirm("确定要退出吗?","系统提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{storage.remove("token"),r(__vitePreload(()=>import("./Login-3d3e58c0.js"),["./Login-3d3e58c0.js","./index-9e861b44.js","./index-aedd0927.css","./system-service-b420b3e1.js","./Login-779ddddd.css"],import.meta.url))}).catch(()=>"cancel")}return(s,n)=>{const V=Vue.resolveComponent("el-switch");return Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1$6,[_hoisted_2$6,Vue.createElementVNode("div",{ref_key:"divRef",ref:u,class:"flex items-center gap-1"},[Vue.createVNode(V,{modelValue:Vue.unref(l),"onUpdate:modelValue":n[0]||(n[0]=m=>Vue.isRef(l)?l.value=m:null),onChange:t,"active-action-icon":o,"inactive-action-icon":a},null,8,["modelValue"]),Vue.createVNode(_sfc_main$d,{class:"p-3.75 hover:bg-mask-1 hover:cursor-pointer","icon-name":"box-arrow-right",width:"20px",height:"20px",onClick:i})],512)])}}}),MoNavbar_vue_vue_type_style_index_0_scoped_95de42cf_lang="",MoNavbar=_export_sfc(_sfc_main$c,[["__scopeId","data-v-95de42cf"]]);async function loadFileText(e){return(await fetch(e)).text()}const _sfc_main$b=Vue.defineComponent({__name:"MoCodeEditor",props:Vue.mergeModels({width:{},height:{},placeholder:{},disabled:{type:Boolean},params:{}},{modelValue:{}}),emits:["update:modelValue"],setup(e){const a=e,o=ref(),u=Vue.useModel(e,"modelValue"),l=computed({get:()=>u.value||"",set:s=>u.value=s}),r=computed(()=>({language:"javascript",minimap:{enabled:!1},theme:store.theme==="dark"?"vs-dark":"vs",automaticLayout:!0,scrollBeyondLastLine:!1,readOnly:a.disabled}));onMounted(()=>{o.value.useLanguages(async s=>{const n=t(s);loadFileText("/declare/mongoose.d.ts").then(m=>n(m,"mongoose.d.ts")),loadFileText("/declare/result.d.ts").then(m=>n(m,"result.d.ts"));let V=null;watchEffect(()=>{const m=a.params;if(V!==(m==null?void 0:m.modelItem)){V=m==null?void 0:m.modelItem;const g=i(V);n(g,"model.d.ts")}})})});function t(s){let n,V,m,g;const C={exec:$};function $(d,f){(n=s.typescript)&&(C.exec=T)(d,f)}function T(d,f){(m=n.javascriptDefaults.getExtraLibs())&&(C.exec=N)(d,f)}async function N(d,f){if(!("getJavaScriptWorker"in n)){w(d,f);return}(C.exec=S)(d,f)}async function S(d,f){const c=await n.getJavaScriptWorker();if(!c){w(d,f);return}V=c,(C.exec=L)(d,f)}async function L(d,f){const c=await V();if(!c){w(d,f);return}g=()=>c.updateExtraLibs(toRaw(m)),(C.exec=_)(d,f)}function _(d,f){w(d,f),g()}function w(d,f){const c=f in m?m[f].version+1:1;m[f]={content:d,version:c}}return(d,f)=>C.exec(d,f)}function i(s){let n="";if(s){const V={};for(const[m,g]of Object.entries(s.schema))V[m]="type"in g?g.type.name:g.name;n=JSON.stringify(V),n=n.replace(/"/g,""),n=n.replace(/String/g,"string"),n=n.replace(/Number/g,"number"),n=n.replace(/Boolean/g,"boolean"),n+="&"}return`declare const Model: mongoose.Model<${n}{ [x: string]: any }>;`}return(s,n)=>{const V=Vue.resolveComponent("MonacoEditor");return Vue.openBlock(),Vue.createBlock(V,{ref_key:"monacoEditorRef",ref:o,modelValue:Vue.unref(l),"onUpdate:modelValue":n[0]||(n[0]=m=>Vue.isRef(l)?l.value=m:null),options:Vue.unref(r),width:a.width,height:a.height},null,8,["modelValue","options","width","height"])}}}),moduleApi={all:"/mossm/module/all"},moduleService={all:async()=>service.get(moduleApi.all)},modelApi={all:"/mossm/model/all",save:"/mossm/model/save",update:"/mossm/model/update",remove:"/mossm/model/remove"},modelService={all:async e=>{const a=e?{module:e}:void 0;return service.get(modelApi.all,a)},save:async e=>service.post(modelApi.save,e),update:async e=>service.post(modelApi.update,e),remove:async e=>service.post(modelApi.remove,{_id:e})},mossmApi={all:"/mossm/api/all",save:"/mossm/api/save",update:"/mossm/api/update",remove:"/mossm/api/remove"},apiService={all:async()=>service.get(mossmApi.all),save:async e=>service.post(mossmApi.save,e),update:async e=>service.post(mossmApi.update,e),remove:async e=>service.post(mossmApi.remove,{_id:e})};function commonHandlerTemplate(e,a,o,u){let l=`/**
 * 处理器
 *
 * @param {Object} param0 请求参数
`,r="{";return e.length>0&&(r+=" ",e.forEach((t,i)=>{const s=t.type==="Date"||t.type==="Object"?t.type:t.type.toLowerCase(),n=t.default?`[param0.${t.name}=${t.default}]`:`param0.${t.name}`;l+=` * @param {${s}} ${n} ${t.description}
`,i>0&&(r+=", "),r+=t.default?`${t.name} = ${t.default}`:t.name})),l+=" */",r+=r.length>1?" }":"}",`${l}
async function handler(${r}) {
    try {
        ${a}
        return Result.success({ message: '${o}', data });
    } catch (error) {
        throw new Error('${u}');
    }
}
`}function selectHandlerTemplate(e,a,o,u,l){e.push({name:"page",type:"Number",description:"页码"},{name:"limit",type:"Number",default:"10",description:"每页数据条数"},{name:"sort",type:"Object",default:"{ create_time: -1 }",description:"排序"});const r=`let data;
        if (page) {
            page = Number(page);
            const [list, total] = await Promise.all([
                Model.find(${o})
                    .select('${a}')
                    .skip((page - 1) * limit)
                    .limit(limit)
                    .sort(sort)
                    .exec(),
                Model.count(${o})
            ]);
            data = { list, total };
        } else {
            data = await Model.find(${o}).select('${a}').sort(sort).exec();
        }`;return commonHandlerTemplate(e,r,u,l)}function insertHandlerTemplate(e,a,o){const l=`const insertModel = new Model(${e.length>0?`{ ${e.map(r=>r.name).join(", ")} }`:"{}"});
        const data = await insertModel.save();`;return commonHandlerTemplate(e,l,a,o)}function updateHandlerTemplate(e,a,o,u){const l=e.length>0?`{ ${e.map(t=>t.name).join(", ")} }`:"{}",r=`const data = await Model.updateMany(${a||"{}"}, { $set: ${l} });`;return commonHandlerTemplate(e,r,o,u)}function deleteHandlerTemplate(e,a,o){const l=`const data = await Model.deleteMany(${e.length>0?`{ ${e.map(r=>r.name).join(", ")} }`:"{}"});`;return commonHandlerTemplate(e,l,a,o)}const _sfc_main$a=Vue.defineComponent({__name:"MoAPI",setup(__props){const modelCache=new Map,typeOptions=[{label:"查询",value:"SELECT"},{label:"新增",value:"INSERT"},{label:"修改",value:"UPDATE"},{label:"删除",value:"DELETE"}],gridProps={toolbar:{buttons:["add","deleteBatch"]},table:{columns:[{prop:"path",label:"接口地址",format:e=>`/${e.module}/${e.model.replace(e.model[0],e.model[0].toLowerCase())}${e.path}`},{prop:"type",label:"类型",format:e=>{var a;return e.customize?"自定义":((a=typeOptions.find(o=>o.value===e.type))==null?void 0:a.label)||"-"}},{prop:"authorized",label:"是否验证",format:e=>e.authorized?"是":"否"},{prop:"method",label:"请求方法"},{prop:"status",label:"状态",format:e=>e.status?"开启":"关闭"},{prop:"create_time",label:"创建时间",width:170,format:e=>new Date(e.create_time).toLocaleString()},{prop:"update_time",label:"更新时间",width:170,format:e=>new Date(e.update_time).toLocaleString()}],operations:["delete","edit"]},pagination:{limit:10},editDialog:{initData:{authorized:!1,customize:!1,type:"SELECT",method:"GET",success_message:"成功!",error_message:"失败!",status:!0},components:[{type:"select",name:"module",label:"模块：",placeholder:"请选择模块",options:async()=>(await moduleService.all()).map(a=>({label:a,value:a}))},{type:"select",name:"model",label:"模型：",placeholder:"请选择模型",disabled:e=>e.module==="",options:(()=>{const optionsCache=new Map;return async editDataRef=>{const module=editDataRef.value.module;if(!module)return editDataRef.value.model="",[];if(optionsCache.has(module))return optionsCache.get(module);const list=await modelService.all(module),options=list.map(item=>(modelCache.set(module+"#"+item.name,{...item,schema:eval("("+item.property+")")}),{label:item.name,value:item.name}));return optionsCache.set(module,options),options}})()},{type:"input",name:"path",label:"路径：",placeholder:"请输入路径"},{type:"select",name:"method",label:"请求方法：",options:[{label:"GET",value:"GET"},{label:"POST",value:"POST"}]},{type:"switch",name:"authorized",label:"是否验证："},{type:"switch",name:"customize",label:"自定义处理："},{type:"custom",name:"raw_handler",label:"处理器：",component:_sfc_main$b,height:500,placeholder:"请输入处理器",params:e=>{const a=e.value.module,o=e.value.model;return{modelItem:modelCache.get(a+"#"+o)}},visible:e=>e.customize==="true"},{type:"select",name:"type",label:"类型：",options:typeOptions,visible:e=>e.customize!=="true"},{type:"select",name:"input_fields",label:"参数字段：",multiple:!0,width:"100%",visible:e=>e.customize!=="true",disabled:e=>e.model==="",options:async e=>{const a=e.value.model;if(!a)return[];const o=e.value.module,u=await getModelItem(o,a);return Object.keys(u.schema).map(r=>({label:r,value:r}))}},{type:"select",name:"output_fields",label:"数据字段：",multiple:!0,width:"100%",visible:e=>e.customize!=="true"&&e.type==="SELECT",disabled:e=>e.model==="",options:async e=>{const a=e.value.model;if(!a)return[];const o=e.value.module,u=await getModelItem(o,a);return Object.keys(u.schema).map(r=>({label:r,value:r}))}},{type:"input",name:"where",label:"过滤条件：",placeholder:"请输入过滤条件",visible:e=>e.customize!=="true"&&e.type!==""&&e.type!=="INSERT"},{type:"input",name:"success_message",label:"成功消息：",placeholder:"请输入成功消息",visible:e=>e.customize!=="true"},{type:"input",name:"error_message",label:"失败消息：",placeholder:"请输入失败消息",visible:e=>e.customize!=="true"},{type:"switch",name:"status",label:"状态：",visible:e=>e._id!==""}],rules:{module:[{required:!0,message:"请输入模块名称",trigger:"blur"}],model:[{required:!0,message:"请输入模型名称",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],handler:[{required:!0,message:"请输入处理器",trigger:"blur"}]},watch:[e=>{var a,o;if(((o=(a=e.value)==null?void 0:a.customize)==null?void 0:o.toString())==="false"&&e.value.module&&e.value.model){let u=e.value.input_fields,l=e.value.output_fields;u instanceof Array&&(u=u.join(",")),l instanceof Array&&(l=l.join(",")),generateHandler({module:e.value.module,model:e.value.model,type:e.value.type,input_fields:u,output_fields:l,where:e.value.where,success_message:e.value.success_message,error_message:e.value.error_message}).then(r=>e.value.raw_handler=r)}}],width:"80%",labelWidth:110},api:{list:async()=>{const e=await apiService.all(),a=e.length;return{list:e,total:a}},add:async e=>{const a={module:e.module,model:e.model,path:e.path,authorized:e.authorized==="true",method:e.method,raw_handler:e.raw_handler,customize:!0};e.customize==="false"&&Object.assign(a,{customize:!1,type:e.type,input_fields:e.input_fields,output_fields:e.output_fields,where:e.where,success_message:e.success_message,error_message:e.error_message}),await apiService.save(a)},update:async e=>{const a={_id:e._id,module:e.module,model:e.model,path:e.path,authorized:e.authorized==="true",method:e.method,customize:!0,raw_handler:e.raw_handler,status:e.status==="true"};e.customize==="false"&&Object.assign(a,{customize:!1,type:e.type,input_fields:e.input_fields,output_fields:e.output_fields,where:e.where,success_message:e.success_message,error_message:e.error_message}),await apiService.update(a)},remove:async({_id:e})=>{e&&await apiService.remove(e)},removeBatch:async e=>{await apiService.remove(e.map(a=>a._id))}}};async function generateHandler({module:e,model:a,type:o="SELECT",input_fields:u="",output_fields:l="",where:r="",success_message:t="成功!",error_message:i="失败!"}){const s=[];if(u!==""){const n=u.split(","),m=(await getModelItem(e,a)).schema;n.forEach(g=>{const C=m[g],$="type"in C?C.type.name:C.name;s.push({name:g,type:$})})}if(o==="SELECT"){const n=l.replace(/,/g," ");return selectHandlerTemplate(s,n,r,t,i)}return o==="INSERT"?insertHandlerTemplate(s,t,i):o==="UPDATE"?updateHandlerTemplate(s,r,t,i):o==="DELETE"?deleteHandlerTemplate(s,t,i):commonHandlerTemplate(s,"let data = {};",t,i)}async function getModelItem(e,a){return new Promise(o=>{const u=setInterval(()=>{const l=modelCache.get(e+"#"+a);l&&(o(l),clearInterval(u))},500)})}return(e,a)=>{const o=Vue.resolveComponent("mo-grid");return Vue.openBlock(),Vue.createBlock(o,Vue.normalizeProps(Vue.guardReactiveProps(gridProps)),null,16)}}}),_hoisted_1$5={class:"my-dropdown1"},_hoisted_2$5=["onClick"],_sfc_main$9=Vue.defineComponent({__name:"AddTable",props:{modules:{}},emits:["confirm"],setup(e,{expose:a,emit:o}){const u=e,l=ref(!1),r=reactive({module:"",model:"",table:""}),t=ref([{children:[{field:"module",title:"模块名称",slots:{default:"module"},span:24},{field:"model",title:"模型名称",itemRender:{name:"$input",props:{placeholder:"请输入模型名称"}},span:24},{field:"table",title:"表名称",itemRender:{name:"$input",props:{placeholder:"请输入表名称"}},span:24}]}]),i=ref({module:[{required:!0,content:"模块名称必须填写"},{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,content:"必须以字母开头且只包含字母、数字、下划线"}],model:[{required:!0,content:"模型名称必须填写"},{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,content:"必须以字母开头且只包含字母、数字、下划线"}],table:[{required:!0,content:"表名称必须填写"},{pattern:/^[a-zA-Z][a-zA-Z0-9_]*$/,content:"必须以字母开头且只包含字母、数字、下划线"}]}),s=ref(!1),n=ref([]),V=ref();watchEffect(()=>{n.value=u.modules});const m=()=>{s.value=!0},g=()=>{n.value=r.module?u.modules.filter(T=>T.indexOf(r.module)>-1):u.modules},C=T=>{var N;r.module=T,s.value=!1,n.value=u.modules,(N=V.value)==null||N.clearValidate("module")},$=async({type:T})=>{var N;if(T==="confirm"){if(await((N=V.value)==null?void 0:N.validate()))return new Error;o("confirm",r)}};return a({open:async()=>{Object.assign(r,{module:"",model:"",table:""}),l.value=!0}}),(T,N)=>{const S=Vue.resolveComponent("VxeInput"),L=Vue.resolveComponent("VxePulldown"),_=Vue.resolveComponent("VxeForm"),w=Vue.resolveComponent("VxeModal");return Vue.openBlock(),Vue.createBlock(w,{modelValue:Vue.unref(l),"onUpdate:modelValue":N[1]||(N[1]=d=>Vue.isRef(l)?l.value=d:null),width:"400",title:"新建表",type:"confirm","show-footer":"","before-hide-method":$},{default:Vue.withCtx(()=>[Vue.createVNode(_,{ref_key:"formRef",ref:V,data:Vue.unref(r),items:Vue.unref(t),rules:Vue.unref(i),"title-width":"85","title-align":"right",titleColon:""},{module:Vue.withCtx(({data:d})=>[Vue.createVNode(L,{modelValue:Vue.unref(s),"onUpdate:modelValue":N[0]||(N[0]=f=>Vue.isRef(s)?s.value=f:null),"class-name":"w-full"},{default:Vue.withCtx(()=>[Vue.createVNode(S,{modelValue:d.module,"onUpdate:modelValue":f=>d.module=f,placeholder:"请输入模块名称",onFocus:m,onKeyup:g},null,8,["modelValue","onUpdate:modelValue"])]),dropdown:Vue.withCtx(()=>[Vue.createElementVNode("div",_hoisted_1$5,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(n),f=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"list-item1",key:f,onClick:c=>C(f)},[Vue.createElementVNode("span",null,Vue.toDisplayString(f),1)],8,_hoisted_2$5))),128))])]),_:2},1032,["modelValue"])]),_:1},8,["data","items","rules"])]),_:1},8,["modelValue"])}}}),AddTable_vue_vue_type_style_index_0_scoped_dbdc7966_lang="",AddTableModal=_export_sfc(_sfc_main$9,[["__scopeId","data-v-dbdc7966"]]);function codeText2Property(text){const property=eval("const property = "+text+";property;");return Object.entries(property).forEach(([e,a])=>{if(typeof a=="function")a===String?property[e]={type:"String"}:a===Number?property[e]={type:"Number"}:a===Date?property[e]={type:"Date"}:a===Boolean&&(property[e]={type:"Boolean"});else{const o={};a.type===String?o.type="String":a.type===Number?o.type="Number":a.type===Date?(o.type="Date",a.default===Date.now&&(o.default="Date.now")):a.type===Boolean&&(o.type="Boolean"),property[e]=Object.assign(a,o)}}),property}const property2codeText=(()=>{const e="#<#__QUOTE__#>#",a="#<#__String__#>#";return function(o){const u={};Object.entries(o).forEach(([r,t])=>{if(Object.keys(t).length===1){u[r]=t.type;return}const i={};t.type==="String"&&t.default!=null?i.default=a+t.default.replace(/"/g,e)+a:t.type==="Date"&&(i.min=t.min?a+t.min+a:void 0,i.max=t.max?a+t.max+a:void 0),u[r]=Object.assign({},t,i)});let l=JSON.stringify(u,null,4);return l=l.replace(/"/g,""),l=l.replace(new RegExp(e,"g"),'\\"'),l=l.replace(new RegExp(a,"g"),'"'),l}})(),_hoisted_1$4={class:"h-full flex flex-col"},_hoisted_2$4=Vue.createElementVNode("span",{class:"mr-2 text-sm"},"模块:",-1),_hoisted_3$3={class:"flex-1 h-0"},_hoisted_4$1={key:0,class:"color-red"},_hoisted_5$1={key:1,class:"color-green"},_sfc_main$8=Vue.defineComponent({__name:"SideList",emits:["editProperty"],setup(e,{expose:a,emit:o}){const u=inject("setLoading"),l=ref([]),r=ref(),t=reactive([]),i=computed(()=>{const _=new Set(l.value.map(w=>w.module));return Array.from(_)}),s=computed(()=>r.value?l.value.filter(_=>_.module===r.value):l.value),n=ref(),V=ref(),m=reactive({body:{options:[[{code:"add",name:"新建表"},{code:"remove",name:"删除当前表"}]]},visibleMethod:({options:_,row:w})=>(_[0][1].visible=w!=null,!0)}),g=({$table:_,menu:w,row:d})=>{switch(w.code){case"add":V.value.open();break;case"remove":const f=l.value.findIndex(c=>c.module===d.module&&c.table===d.table);u(!0),S(d).then(()=>{l.value.splice(f,1),d===_.getCurrentRecord()&&o("editProperty")}).catch(c=>VXETable.modal.message({content:c.message,status:"error"})).finally(()=>u(!1));break}},C=({newValue:_,oldValue:w,$table:d})=>{const f=l.value.find(c=>c.module===_.module&&c.table===_.table);o("editProperty",f,()=>d.setCurrentRow(w))};async function $(){u(!0);try{const _=await modelService.all();l.value=_.map(({_id:w,module:d,name:f,table:c,property:p})=>({_id:w,module:d,model:f,table:c,property:codeText2Property(p)}))}catch(_){window.process.env.VUE_APP_ENV!=="production"&&console.error(_),ElementPlus.ElMessage({message:"获取模型数据失败!",type:"error"})}finally{u(!1)}}function T(_){l.value.push({property:{},..._})}async function N(_){return await modelService.save({module:_.module,name:_.model,table:_.table,property:property2codeText(_.property)})}async function S(_){_._id&&await modelService.remove(_._id)}async function L(_){const{tableData:w}=n.value.getTableData(),d=w.find(f=>f.module===_.module&&f.table===_.table);d&&!t.includes(d)&&t.push(d);try{const{_id:f}=await N(_);d&&(d._id=f,d.property=_.property,t.splice(t.indexOf(d),1))}catch{VXETable.modal.message({content:"保存失败!",status:"error"})}}return a({saveTable:L}),$(),(_,w)=>{const d=Vue.resolveComponent("VxeOption"),f=Vue.resolveComponent("VxeSelect"),c=Vue.resolveComponent("VxeButton"),p=Vue.resolveComponent("VxeToolbar"),x=Vue.resolveComponent("VxeColumn"),E=Vue.resolveComponent("VxeTable");return Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1$4,[Vue.createElementVNode("div",null,[Vue.createVNode(p,{size:"mini"},{buttons:Vue.withCtx(()=>[_hoisted_2$4,Vue.createVNode(f,{"class-name":"flex-1 ml-1",modelValue:Vue.unref(r),"onUpdate:modelValue":w[0]||(w[0]=v=>Vue.isRef(r)?r.value=v:null),placeholder:"所有",clearable:""},{default:Vue.withCtx(()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(i),v=>(Vue.openBlock(),Vue.createBlock(d,{key:v,value:v,label:v},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),Vue.createVNode(c,{class:"ml-2",icon:"vxe-icon-refresh",title:"刷新",circle:"",onClick:$})]),_:1})]),Vue.createElementVNode("div",_hoisted_3$3,[Vue.createVNode(E,{ref_key:"tableRef",ref:n,height:"auto",size:"mini","row-config":{isCurrent:!0,isHover:!0},"show-header":!1,data:Vue.unref(s),"menu-config":Vue.unref(m),onCurrentChange:C,onMenuClick:g},{default:Vue.withCtx(()=>[Vue.createVNode(x,{"class-name":"hover:cursor-pointer"},{default:Vue.withCtx(({row:v})=>[Vue.createElementVNode("span",null,Vue.toDisplayString(`[${v.module}] ${v.table} : ${v.model}`),1),Vue.unref(t).includes(v)?(Vue.openBlock(),Vue.createElementBlock("span",_hoisted_4$1,"（同步中）")):Vue.createCommentVNode("",!0),!Vue.unref(t).includes(v)&&!v._id?(Vue.openBlock(),Vue.createElementBlock("span",_hoisted_5$1,"（新建）")):Vue.createCommentVNode("",!0)]),_:1})]),_:1},8,["data","menu-config"])]),Vue.createVNode(AddTableModal,{ref_key:"addModal",ref:V,modules:Vue.unref(i),onConfirm:T},null,8,["modules"])])}}}),_hoisted_1$3={key:0},_hoisted_2$3={class:"h-28px inline-block px-10px box-border b-1 b-#dcdfe6 b-solid rounded vertical-bottom"},_hoisted_3$2=Vue.createElementVNode("span",{class:"m2"},"~",-1),_hoisted_4={key:1},_hoisted_5=Vue.createElementVNode("span",{class:"m2"},"~",-1),_hoisted_6={key:2},_hoisted_7=Vue.createElementVNode("span",{class:"m2"},"~",-1),_hoisted_8={key:3},_sfc_main$7=Vue.defineComponent({__name:"OperateAndLimit",props:{row:{},tableRef:{}},setup(e){const a=e,{row:o,tableRef:u}=toRefs(a);function l({$event:r}){var $;let t="";const{lowercase:i,uppercase:s,trim:n,minlength:V,maxlength:m,min:g,max:C}=o.value;i&&(t+=`lowercase:${i};`),s&&(t+=`uppercase:${s};`),n&&(t+=`trim:${n};`),V!==void 0&&(t+=`minlength:${V};`),m!==void 0&&(t+=`maxlength:${m};`),g!==void 0&&(t+=`min:${g};`),C!==void 0&&(t+=`max:${C};`),o.value.operateAndLimit=t,r&&(($=u==null?void 0:u.value)==null||$.clearEdit(r))}return(r,t)=>{const i=Vue.resolveComponent("VxeCheckbox"),s=Vue.resolveComponent("VxeInput");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.unref(o).type==="String"?(Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1$3,[Vue.createElementVNode("span",_hoisted_2$3,[Vue.createVNode(i,{modelValue:Vue.unref(o).lowercase,"onUpdate:modelValue":t[0]||(t[0]=n=>Vue.unref(o).lowercase=n),onChange:l},{default:Vue.withCtx(()=>[Vue.createTextVNode("lowercase")]),_:1},8,["modelValue"]),Vue.createVNode(i,{modelValue:Vue.unref(o).uppercase,"onUpdate:modelValue":t[1]||(t[1]=n=>Vue.unref(o).uppercase=n),onChange:l},{default:Vue.withCtx(()=>[Vue.createTextVNode("uppercase")]),_:1},8,["modelValue"]),Vue.createVNode(i,{modelValue:Vue.unref(o).trim,"onUpdate:modelValue":t[2]||(t[2]=n=>Vue.unref(o).trim=n),onChange:l},{default:Vue.withCtx(()=>[Vue.createTextVNode("trim")]),_:1},8,["modelValue"])]),Vue.createElementVNode("span",null,[Vue.createVNode(s,{"class-name":"w-100px! inline-block! ml-2",type:"number",modelValue:Vue.unref(o).minlength,"onUpdate:modelValue":t[3]||(t[3]=n=>Vue.unref(o).minlength=n),max:Vue.unref(o).maxlength,placeholder:"最短长度",onChange:l,onBlur:t[4]||(t[4]=()=>l({}))},null,8,["modelValue","max"]),_hoisted_3$2,Vue.createVNode(s,{"class-name":"w-100px! inline-block!",type:"number",modelValue:Vue.unref(o).maxlength,"onUpdate:modelValue":t[5]||(t[5]=n=>Vue.unref(o).maxlength=n),min:Vue.unref(o).minlength,placeholder:"最长长度",onChange:l,onBlur:t[6]||(t[6]=()=>l({}))},null,8,["modelValue","min"])])])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Number"?(Vue.openBlock(),Vue.createElementBlock("div",_hoisted_4,[Vue.createVNode(s,{"class-name":"w-222px! inline-block!",type:"number",modelValue:Vue.unref(o).min,"onUpdate:modelValue":t[7]||(t[7]=n=>Vue.unref(o).min=n),max:Vue.unref(o).max,placeholder:"最小值",onChange:l,onBlur:t[8]||(t[8]=()=>l({}))},null,8,["modelValue","max"]),_hoisted_5,Vue.createVNode(s,{"class-name":"w-222px! inline-block!",type:"number",modelValue:Vue.unref(o).max,"onUpdate:modelValue":t[9]||(t[9]=n=>Vue.unref(o).max=n),min:Vue.unref(o).min,placeholder:"最大值",onChange:l,onBlur:t[10]||(t[10]=()=>l({}))},null,8,["modelValue","min"])])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Date"?(Vue.openBlock(),Vue.createElementBlock("div",_hoisted_6,[Vue.createVNode(s,{"class-name":"w-222px! inline-block!",type:"datetime",modelValue:Vue.unref(o).min,"onUpdate:modelValue":t[11]||(t[11]=n=>Vue.unref(o).min=n),"disabled-method":({date:n})=>Vue.unref(o).max?n.getTime()>=new Date(Vue.unref(o).max).getTime():!1,placeholder:"最早时间",onChange:l,"value-format":"yyyy-MM-ddTHH:mm:ss.sssZ"},null,8,["modelValue","disabled-method"]),_hoisted_7,Vue.createVNode(s,{"class-name":"w-222px! inline-block!",type:"datetime",modelValue:Vue.unref(o).max,"onUpdate:modelValue":t[12]||(t[12]=n=>Vue.unref(o).max=n),"disabled-method":({date:n})=>Vue.unref(o).min?n.getTime()<=new Date(Vue.unref(o).min).getTime():!1,placeholder:"最晚时间",onChange:l,"value-format":"yyyy-MM-ddTHH:mm:ss.sssZ"},null,8,["modelValue","disabled-method"])])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Boolean"?(Vue.openBlock(),Vue.createElementBlock("span",_hoisted_8,"-")):Vue.createCommentVNode("",!0)])}}}),_sfc_main$6=Vue.defineComponent({__name:"TypeSelect",props:{row:{}},emits:["change"],setup(e,{emit:a}){const o=e,{row:u}=toRefs(o),l=["String","Number","Date","Boolean"];return(r,t)=>{const i=Vue.resolveComponent("VxeOption"),s=Vue.resolveComponent("VxeSelect");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(s,{modelValue:Vue.unref(u).type,"onUpdate:modelValue":t[0]||(t[0]=n=>Vue.unref(u).type=n),onChange:t[1]||(t[1]=({value:n,$event:V})=>a("change",{value:n,$event:V}))},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(l,n=>Vue.createVNode(i,{key:n,value:n,label:n},null,8,["value","label"])),64))]),_:1},8,["modelValue"])])}}}),_sfc_main$5=Vue.defineComponent({__name:"Default",props:{row:{},tableRef:{}},setup(e){const a=e,{row:o}=toRefs(a);return(u,l)=>{const r=Vue.resolveComponent("VxeInput"),t=Vue.resolveComponent("VxeOption"),i=Vue.resolveComponent("VxeSelect");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.unref(o).type==="String"?(Vue.openBlock(),Vue.createBlock(r,{key:0,modelValue:Vue.unref(o).default,"onUpdate:modelValue":l[0]||(l[0]=s=>Vue.unref(o).default=s)},null,8,["modelValue"])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Number"?(Vue.openBlock(),Vue.createBlock(r,{key:1,type:"number",modelValue:Vue.unref(o).default,"onUpdate:modelValue":l[1]||(l[1]=s=>Vue.unref(o).default=s),onChange:l[2]||(l[2]=({$event:s})=>{var n;return(n=u.tableRef)==null?void 0:n.clearEdit(s)})},null,8,["modelValue"])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Date"?(Vue.openBlock(),Vue.createBlock(i,{key:2,modelValue:Vue.unref(o).default,"onUpdate:modelValue":l[3]||(l[3]=s=>Vue.unref(o).default=s),clearable:"",onChange:l[4]||(l[4]=({$event:s})=>{var n;return(n=u.tableRef)==null?void 0:n.clearEdit(s)})},{default:Vue.withCtx(()=>[Vue.createVNode(t,{value:"Date.now",label:"Date.now"})]),_:1},8,["modelValue"])):Vue.createCommentVNode("",!0),Vue.unref(o).type==="Boolean"?(Vue.openBlock(),Vue.createBlock(i,{key:3,modelValue:Vue.unref(o).default,"onUpdate:modelValue":l[5]||(l[5]=s=>Vue.unref(o).default=s),clearable:"",onChange:l[6]||(l[6]=({$event:s})=>{var n;return(n=u.tableRef)==null?void 0:n.clearEdit(s)})},{default:Vue.withCtx(()=>[Vue.createVNode(t,{value:!1,label:"否"}),Vue.createVNode(t,{value:!0,label:"是"})]),_:1},8,["modelValue"])):Vue.createCommentVNode("",!0)])}}}),_sfc_main$4=Vue.defineComponent({__name:"Preview",props:Vue.mergeModels({text:{},title:{}},{modelValue:{type:Boolean,required:!0}}),emits:["update:modelValue"],setup(e){const a=e,o=Vue.useModel(e,"modelValue"),u=Vue.ref("");return Vue.watchEffect(()=>{u.value=a.text}),(l,r)=>{const t=Vue.resolveComponent("VxeTextarea"),i=Vue.resolveComponent("VxeModal");return Vue.openBlock(),Vue.createBlock(i,{"class-name":"preview-modal",modelValue:o.value,"onUpdate:modelValue":r[1]||(r[1]=s=>o.value=s),width:"50vw",height:"80vh",title:l.title||"弹窗","show-footer":"","show-zoom":""},{default:Vue.withCtx(()=>[Vue.createVNode(t,{modelValue:u.value,"onUpdate:modelValue":r[0]||(r[0]=s=>u.value=s),readonly:"",resize:"none"},null,8,["modelValue"])]),_:1},8,["modelValue","title"])}}}),Preview_vue_vue_type_style_index_0_lang="",Preview_vue_vue_type_style_index_1_scoped_d38f7fae_lang="",Preview=_export_sfc(_sfc_main$4,[["__scopeId","data-v-d38f7fae"]]),_hoisted_1$2={class:"h-full flex flex-col"},_hoisted_2$2={class:"flex-1 h-0"},_sfc_main$3=Vue.defineComponent({__name:"MainTable",props:{modelValue:{}},emits:Vue.mergeModels(["saveProperty"],["update:modelValue"]),setup(e,{expose:a,emit:o}){const u=Vue.useModel(e,"modelValue"),l=ref([]),r=ref(!1),t=ref(),i=ref(),s=ref(!1),n=ref(""),V=ref({name:[{required:!0,validator:({$table:c,cellValue:p,rowIndex:x})=>{if(!p)return new Error("名称必须填写");if(!/^[a-zA-Z][a-zA-Z0-9_]*$/.test(p))return new Error("必须以字母开头且只包含字母、数字、下划线");const{tableData:E}=c.getTableData();for(let v=0;v<x;++v)if(E[v].name===p)return new Error("不能存在相同的名称")}}]});watchEffect(()=>{u.value?l.value=Object.entries(u.value).map(([c,p])=>({name:c,operateAndLimit:f(p),...p})):l.value=[],r.value=!1});const m=reactive({body:{options:[[{code:"add",name:"添加一行"},{code:"remove",name:"删除当前行"},{code:"remove-checked",name:"删除选择行"}],[{code:"copy",name:"复制当前行"},{code:"copy-checked",name:"复制选择行"},{code:"paste",name:"粘贴"}]]},visibleMethod:({options:c,row:p})=>{const x=t.value;if(!x||!p)c[0][1].visible=!1,c[0][2].visible=!1,c[1][0].visible=!1,c[1][1].visible=!1;else if(p){c[0][1].visible=!0,c[1][0].visible=!0;const E=x.isCheckedByCheckboxRow(p);c[0][2].visible=E,c[1][1].visible=E}return navigator.clipboard.readText().then(E=>c[1][2].visible=E.startsWith("#VXETable#")),!0}}),g=({$table:c,menu:p,row:x})=>{switch(p.code){case"add":N();break;case"remove":c.remove(x),d();break;case"remove-checked":c.removeCheckboxRow(),d();break;case"copy":L([x]);break;case"copy-checked":L(c.getCheckboxRecords());break;case"paste":_();break}},C=()=>{d()};function $(){const c=t.value;c&&(c.revertData(),r.value=!1)}async function T(c){const p=t.value;if(p&&u.value&&!await p.validate(!0)){const E=c??p.getTableData().fullData,v={};return E.forEach(b=>{const k={type:b.type};b.required&&(k.required=b.required),b.unique&&(k.unique=b.unique),b.default!=null&&(k.default=b.default),b.type==="String"?(b.lowercase&&(k.lowercase=b.lowercase),b.uppercase&&(k.uppercase=b.uppercase),b.trim&&(k.trim=b.trim),b.minlength!==void 0&&(k.minlength=b.minlength),b.maxlength!==void 0&&(k.maxlength=b.maxlength)):(b.type==="Number"||b.type==="Date")&&(b.min!==void 0&&(k.min=b.min),b.max!==void 0&&(k.max=b.max)),v[b.name]=Object.assign({},k)}),o("saveProperty",u.value=v),!0}return!1}function N(c){const p=t.value;p&&(c?(p.insertAt(c,-1),r.value=c.length>0):(p.insertAt({type:"String"},-1),r.value=!0))}async function S(){const c=t.value;if(c){const p=c.getCheckboxRecords();if(!p||p.length<1){VXETable.modal.message({content:"请选择至少一行数据",status:"warning"});return}await VXETable.modal.confirm("您确定要删除已选择的行吗？")==="confirm"&&(c.removeCheckboxRow(),d())}}function L(c){const p=JSON.stringify(c.map(x=>Object.assign({},x,{_X_ROW_KEY:void 0})));navigator.clipboard.writeText("#VXETable#"+p)}function _(){navigator.clipboard.readText().then(c=>N(JSON.parse(c.replace("#VXETable#",""))))}function w(){u.value&&(n.value=property2codeText(u.value),s.value=!0)}function d(){const c=t.value;if(c){const{insertRecords:p,removeRecords:x,updateRecords:E}=c.getRecordset();r.value=p.length>0||x.length>0||E.length>0}}function f({lowercase:c,uppercase:p,trim:x,minlength:E,maxlength:v,min:b,max:k}){let M="";return c&&(M+=`lowercase:${c};`),p&&(M+=`uppercase:${p};`),x&&(M+=`trim:${x};`),E!==void 0&&(M+=`minlength:${E};`),v!==void 0&&(M+=`maxlength:${v};`),b!==void 0&&(M+=`min:${b};`),k!==void 0&&(M+=`max:${k};`),M}return nextTick(()=>{const c=t.value,p=i.value;c&&p&&c.connect(p)}),a({checkSave:async()=>r.value&&await VXETable.modal.confirm("当前操作表未保存，是否保存?")==="confirm"?await T():!0}),(c,p)=>{const x=Vue.resolveComponent("VxeButton"),E=Vue.resolveComponent("VxeToolbar"),v=Vue.resolveComponent("VxeColumn"),b=Vue.resolveComponent("VxeInput"),k=Vue.resolveComponent("VxeCheckbox"),M=Vue.resolveComponent("VxeTable");return Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1$2,[Vue.createElementVNode("div",null,[Vue.createVNode(E,{ref_key:"toolbarRef",ref:i,custom:"",size:"mini"},{buttons:Vue.withCtx(()=>[Vue.createVNode(x,{status:"primary",icon:"vxe-icon-add",content:"添加一行",disabled:u.value==null,onClick:p[0]||(p[0]=()=>N())},null,8,["disabled"]),Vue.createVNode(x,{status:"danger",icon:"vxe-icon-delete",content:"删除",disabled:u.value==null,onClick:S},null,8,["disabled"]),Vue.unref(r)?(Vue.openBlock(),Vue.createBlock(x,{key:0,status:"primary",icon:"vxe-icon-save",content:"保存",onClick:p[1]||(p[1]=()=>T())})):Vue.createCommentVNode("",!0)]),tools:Vue.withCtx(()=>[Vue.unref(r)?(Vue.openBlock(),Vue.createBlock(x,{key:0,icon:"vxe-icon-repeat",title:"重置",circle:"",onClick:$})):Vue.createCommentVNode("",!0),!Vue.unref(r)&&u.value&&Object.keys(u.value).length>0?(Vue.openBlock(),Vue.createBlock(x,{key:1,icon:"vxe-icon-eye-fill",title:"预览",circle:"",onClick:w})):Vue.createCommentVNode("",!0)]),_:1},512)]),Vue.createElementVNode("div",_hoisted_2$2,[Vue.createVNode(M,{class:"field_list",ref_key:"tableRef",ref:t,data:Vue.unref(l),"keep-source":"","edit-config":{trigger:"click"},"edit-rules":Vue.unref(V),"row-config":{isHover:!0},"checkbox-config":{highlight:!0,range:!0,isShiftKey:!0},"menu-config":Vue.unref(m),height:"auto",size:"mini",align:"center",onEditClosed:C,onMenuClick:g},{default:Vue.withCtx(()=>[Vue.createVNode(v,{type:"checkbox",width:"40"}),Vue.createVNode(v,{type:"seq",width:"40"}),Vue.createVNode(v,{field:"name",title:"名称","min-width":"150","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(b,{modelValue:y.name,"onUpdate:modelValue":B=>y.name=B},null,8,["modelValue","onUpdate:modelValue"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(b,{modelValue:y.name,"onUpdate:modelValue":B=>y.name=B},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Vue.createVNode(v,{field:"type",title:"类型",width:"150","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$6,{row:y},null,8,["row"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$6,{row:y,onChange:p[2]||(p[2]=({$event:B})=>{var R;return(R=Vue.unref(t))==null?void 0:R.clearEdit(B)})},null,8,["row"])]),_:1}),Vue.createVNode(v,{field:"operateAndLimit",title:"操作 / 限制",width:"500","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$7,{row:y,"table-ref":Vue.unref(t)},null,8,["row","table-ref"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$7,{row:y,"table-ref":Vue.unref(t)},null,8,["row","table-ref"])]),_:1}),Vue.createVNode(v,{field:"default",title:"默认值","min-width":"200","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$5,{row:y,"table-ref":Vue.unref(t)},null,8,["row","table-ref"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(_sfc_main$5,{row:y,"table-ref":Vue.unref(t)},null,8,["row","table-ref"])]),_:1}),Vue.createVNode(v,{field:"required",title:"非空",width:"60","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(k,{modelValue:y.required,"onUpdate:modelValue":B=>y.required=B},null,8,["modelValue","onUpdate:modelValue"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(k,{modelValue:y.required,"onUpdate:modelValue":B=>y.required=B},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),Vue.createVNode(v,{field:"unique",title:"唯一",width:"60","edit-render":{}},{default:Vue.withCtx(({row:y})=>[Vue.createVNode(k,{modelValue:y.unique,"onUpdate:modelValue":B=>y.unique=B},null,8,["modelValue","onUpdate:modelValue"])]),edit:Vue.withCtx(({row:y})=>[Vue.createVNode(k,{modelValue:y.unique,"onUpdate:modelValue":B=>y.unique=B},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data","edit-rules","menu-config"])]),Vue.createVNode(Preview,{modelValue:Vue.unref(s),"onUpdate:modelValue":p[3]||(p[3]=y=>Vue.isRef(s)?s.value=y:null),text:Vue.unref(n),title:"预览"},null,8,["modelValue","text"])])}}}),MainTable_vue_vue_type_style_index_0_scoped_ca777e67_lang="",MainTable=_export_sfc(_sfc_main$3,[["__scopeId","data-v-ca777e67"]]),_hoisted_1$1={class:"h-full flex gap-1 p2 box-border"},_hoisted_2$1={class:"w-16% min-w-250px"},_hoisted_3$1={class:"flex-1"},_sfc_main$2=Vue.defineComponent({__name:"MoModel",setup(e){const a=ref(),o=ref(),u=ref(),l=computed({get:()=>{var n;return(n=u.value)==null?void 0:n.property},set:n=>u.value&&n&&(u.value.property=n)}),r=ref(!1);function t(n){r.value=n}async function i(n,V){const m=o.value;m&&(await m.checkSave()?u.value=n:V&&V())}async function s(n){u.value&&a.value&&(u.value.property=n,a.value.saveTable(u.value))}return provide("setLoading",t),(n,V)=>{const m=Vue.resolveDirective("loading");return Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1$1,[Vue.createElementVNode("div",_hoisted_2$1,[Vue.createVNode(_sfc_main$8,{ref_key:"sideListRef",ref:a,onEditProperty:i},null,512)]),Vue.createElementVNode("div",_hoisted_3$1,[Vue.createVNode(MainTable,{ref_key:"mainTableRef",ref:o,modelValue:Vue.unref(l),"onUpdate:modelValue":V[0]||(V[0]=g=>Vue.isRef(l)?l.value=g:null),onSaveProperty:s},null,8,["modelValue"])])])),[[m,Vue.unref(r)]])}}}),_hoisted_1={class:"h-full flex justify-center"},_hoisted_2={class:"flex items-center justify-between"},_hoisted_3=Vue.createElementVNode("span",null,"系统配置",-1),_sfc_main$1=Vue.defineComponent({__name:"MoSetting",setup(e){const a=ref(),o=reactive({username:"",password:""}),u={username:[{required:!0,message:"请输入用户名",trigger:"none"}],password:[{required:!0,message:"请输入密码",trigger:"none"}]},l=()=>{var r;(r=a.value)==null||r.validate(t=>{t&&systemService.chsetting({...o}).then(()=>{ElementPlus.ElMessage({message:"保存成功!",type:"success"})}).catch(i=>{window.process.env.VUE_APP_ENV!=="production"&&console.error(i),ElementPlus.ElMessage({message:"保存失败！",type:"error"})})})};return(r,t)=>{const i=Vue.resolveComponent("el-button"),s=Vue.resolveComponent("el-input"),n=Vue.resolveComponent("el-form-item"),V=Vue.resolveComponent("el-form"),m=Vue.resolveComponent("el-card");return Vue.openBlock(),Vue.createElementBlock("div",_hoisted_1,[Vue.createVNode(m,{class:"min-w-210 w-3/5"},{header:Vue.withCtx(()=>[Vue.createElementVNode("div",_hoisted_2,[_hoisted_3,Vue.createVNode(i,{type:"primary",onClick:l},{default:Vue.withCtx(()=>[Vue.createTextVNode("保存")]),_:1})])]),default:Vue.withCtx(()=>[Vue.createVNode(V,{model:Vue.unref(o),ref_key:"formComponent",ref:a,rules:u,"label-width":"110px"},{default:Vue.withCtx(()=>[Vue.createVNode(n,{label:"用户名",prop:"username"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{modelValue:Vue.unref(o).username,"onUpdate:modelValue":t[0]||(t[0]=g=>Vue.unref(o).username=g),placeholder:"admin"},null,8,["modelValue"])]),_:1}),Vue.createVNode(n,{label:"密码",prop:"password"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{modelValue:Vue.unref(o).password,"onUpdate:modelValue":t[1]||(t[1]=g=>Vue.unref(o).password=g),type:"password",placeholder:"******","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1})])}}}),_sfc_main=Vue.defineComponent({__name:"MoDashboard",setup(e){const a=[{_id:"api",title:"API管理",component:_sfc_main$a},{_id:"model",title:"模型管理",component:_sfc_main$2},{_id:"setting",title:"系统设置",component:_sfc_main$1}];return(o,u)=>{const l=Vue.resolveComponent("el-header"),r=Vue.resolveComponent("el-divider"),t=Vue.resolveComponent("el-scrollbar"),i=Vue.resolveComponent("el-tab-pane"),s=Vue.resolveComponent("el-tabs"),n=Vue.resolveComponent("el-main"),V=Vue.resolveComponent("el-container");return Vue.openBlock(),Vue.createBlock(V,{class:"h-screen"},{default:Vue.withCtx(()=>[Vue.createVNode(l,{class:"p0",height:"50px"},{default:Vue.withCtx(()=>[Vue.createVNode(MoNavbar)]),_:1}),Vue.createVNode(r,{class:"m0"}),Vue.createVNode(n,{class:"p0 overflow-hidden"},{default:Vue.withCtx(()=>[Vue.createVNode(s,{class:"mo-dashboard__tabs","model-value":a[0]._id,type:"border-card"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(a,m=>Vue.createVNode(i,{key:m._id,name:m._id,label:m.title,lazy:""},{default:Vue.withCtx(()=>[Vue.createVNode(t,{class:"mo-dashboard__scrollbar"},{default:Vue.withCtx(()=>[(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(m.component),{params:m.params},null,8,["params"]))]),_:2},1024)]),_:2},1032,["name","label"])),64))]),_:1},8,["model-value"])]),_:1})]),_:1})}}}),MoDashboard_vue_vue_type_style_index_0_scoped_c74c6a56_lang="",MoDashboard=_export_sfc(_sfc_main,[["__scopeId","data-v-c74c6a56"]]);export{MoDashboard as default};
